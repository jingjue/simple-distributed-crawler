{"remainingRequest":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Project\\spiderPlatform\\spider_platform\\src\\components\\cache\\AKeepAlive.js","dependencies":[{"path":"D:\\Project\\spiderPlatform\\spider_platform\\src\\components\\cache\\AKeepAlive.js","mtime":1646988546792},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646988157970},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\babel-loader\\lib\\index.js","mtime":1646988157969},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\eslint-loader\\index.js","mtime":1646988172536}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IiOwppbXBvcnQgX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIgZnJvbSAiRDovUHJvamVjdC9zcGlkZXJQbGF0Zm9ybS9zcGlkZXJfcGxhdGZvcm0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiOwppbXBvcnQgeyBpc0RlZiwgaXNSZWdFeHAsIHJlbW92ZSB9IGZyb20gJ0AvdXRpbHMvdXRpbCc7CnZhciBwYXR0ZXJuVHlwZXMgPSBbU3RyaW5nLCBSZWdFeHAsIEFycmF5XTsKCmZ1bmN0aW9uIG1hdGNoZXMocGF0dGVybiwgbmFtZSkgewogIGlmIChBcnJheS5pc0FycmF5KHBhdHRlcm4pKSB7CiAgICBpZiAocGF0dGVybi5pbmRleE9mKG5hbWUpID4gLTEpIHsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9IGVsc2UgewogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocGF0dGVybiksCiAgICAgICAgICBfc3RlcDsKCiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBpdGVtID0gX3N0ZXAudmFsdWU7CgogICAgICAgICAgaWYgKGlzUmVnRXhwKGl0ZW0pICYmIGl0ZW0udGVzdChuYW1lKSkgewogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0gZWxzZSBpZiAodHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnKSB7CiAgICByZXR1cm4gcGF0dGVybi5zcGxpdCgnLCcpLmluZGV4T2YobmFtZSkgPiAtMTsKICB9IGVsc2UgaWYgKGlzUmVnRXhwKHBhdHRlcm4pKSB7CiAgICByZXR1cm4gcGF0dGVybi50ZXN0KG5hbWUpOwogIH0KICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKCiAgcmV0dXJuIGZhbHNlOwp9CgpmdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKG9wdHMpIHsKICByZXR1cm4gb3B0cyAmJiAob3B0cy5DdG9yLm9wdGlvbnMubmFtZSB8fCBvcHRzLnRhZyk7Cn0KCmZ1bmN0aW9uIGdldENvbXBvbmVudEtleSh2bm9kZSkgewogIHZhciBjb21wb25lbnRPcHRpb25zID0gdm5vZGUuY29tcG9uZW50T3B0aW9ucywKICAgICAga2V5ID0gdm5vZGUua2V5OwogIHJldHVybiBrZXkgPT0gbnVsbCA/IGNvbXBvbmVudE9wdGlvbnMuQ3Rvci5jaWQgKyAoY29tcG9uZW50T3B0aW9ucy50YWcgPyAiOjoiLmNvbmNhdChjb21wb25lbnRPcHRpb25zLnRhZykgOiAnJykgOiBrZXkgKyBjb21wb25lbnRPcHRpb25zLkN0b3IuY2lkOwp9CgpmdW5jdGlvbiBnZXRGaXJzdENvbXBvbmVudENoaWxkKGNoaWxkcmVuKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBjID0gY2hpbGRyZW5baV07CgogICAgICBpZiAoaXNEZWYoYykgJiYgKGlzRGVmKGMuY29tcG9uZW50T3B0aW9ucykgfHwgYy5pc0FzeW5jUGxhY2Vob2xkZXIpKSB7CiAgICAgICAgcmV0dXJuIGM7CiAgICAgIH0KICAgIH0KICB9Cn0KCmZ1bmN0aW9uIHBydW5lQ2FjaGUoa2VlcEFsaXZlSW5zdGFuY2UsIGZpbHRlcikgewogIHZhciBjYWNoZSA9IGtlZXBBbGl2ZUluc3RhbmNlLmNhY2hlLAogICAgICBrZXlzID0ga2VlcEFsaXZlSW5zdGFuY2Uua2V5cywKICAgICAgX3Zub2RlID0ga2VlcEFsaXZlSW5zdGFuY2UuX3Zub2RlOwoKICBmb3IgKHZhciBrZXkgaW4gY2FjaGUpIHsKICAgIHZhciBjYWNoZWROb2RlID0gY2FjaGVba2V5XTsKCiAgICBpZiAoY2FjaGVkTm9kZSkgewogICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoY2FjaGVkTm9kZS5jb21wb25lbnRPcHRpb25zKTsKICAgICAgdmFyIGNvbXBvbmVudEtleSA9IGdldENvbXBvbmVudEtleShjYWNoZWROb2RlKTsKCiAgICAgIGlmIChuYW1lICYmICFmaWx0ZXIobmFtZSwgY29tcG9uZW50S2V5KSkgewogICAgICAgIHBydW5lQ2FjaGVFbnRyeShjYWNoZSwga2V5LCBrZXlzLCBfdm5vZGUpOwogICAgICB9CiAgICB9CiAgfQp9CgpmdW5jdGlvbiBwcnVuZUNhY2hlRW50cnkyKGNhY2hlLCBrZXksIGtleXMpIHsKICB2YXIgY2FjaGVkID0gY2FjaGVba2V5XTsKCiAgaWYgKGNhY2hlZCkgewogICAgY2FjaGVkLmNvbXBvbmVudEluc3RhbmNlLiRkZXN0cm95KCk7CiAgfQoKICBjYWNoZVtrZXldID0gbnVsbDsKICByZW1vdmUoa2V5cywga2V5KTsKfQoKZnVuY3Rpb24gcHJ1bmVDYWNoZUVudHJ5KGNhY2hlLCBrZXksIGtleXMsIGN1cnJlbnQpIHsKICB2YXIgY2FjaGVkID0gY2FjaGVba2V5XTsKCiAgaWYgKGNhY2hlZCAmJiAoIWN1cnJlbnQgfHwgY2FjaGVkLnRhZyAhPT0gY3VycmVudC50YWcpKSB7CiAgICBjYWNoZWQuY29tcG9uZW50SW5zdGFuY2UuJGRlc3Ryb3koKTsKICB9CgogIGNhY2hlW2tleV0gPSBudWxsOwogIHJlbW92ZShrZXlzLCBrZXkpOwp9CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0FLZWVwQWxpdmUnLAogIGFic3RyYWN0OiB0cnVlLAogIG1vZGVsOiB7CiAgICBwcm9wOiAnY2xlYXJDYWNoZXMnLAogICAgZXZlbnQ6ICdjbGVhcicKICB9LAogIHByb3BzOiB7CiAgICBpbmNsdWRlOiBwYXR0ZXJuVHlwZXMsCiAgICBleGNsdWRlOiBwYXR0ZXJuVHlwZXMsCiAgICBleGNsdWRlS2V5czogcGF0dGVyblR5cGVzLAogICAgbWF4OiBbU3RyaW5nLCBOdW1iZXJdLAogICAgY2xlYXJDYWNoZXM6IEFycmF5CiAgfSwKICB3YXRjaDogewogICAgY2xlYXJDYWNoZXM6IGZ1bmN0aW9uIGNsZWFyQ2FjaGVzKHZhbCkgewogICAgICBpZiAodmFsICYmIHZhbC5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSwKICAgICAgICAgICAga2V5cyA9IHRoaXMua2V5czsKICAgICAgICB2YWwuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICBwcnVuZUNhY2hlRW50cnkyKGNhY2hlLCBrZXksIGtleXMpOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuJGVtaXQoJ2NsZWFyJywgW10pOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7CiAgICB0aGlzLmtleXMgPSBbXTsKICB9LAogIGRlc3Ryb3llZDogZnVuY3Rpb24gZGVzdHJveWVkKCkgewogICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHsKICAgICAgcHJ1bmVDYWNoZUVudHJ5KHRoaXMuY2FjaGUsIGtleSwgdGhpcy5rZXlzKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMuJHdhdGNoKCdpbmNsdWRlJywgZnVuY3Rpb24gKHZhbCkgewogICAgICBwcnVuZUNhY2hlKF90aGlzLCBmdW5jdGlvbiAobmFtZSkgewogICAgICAgIHJldHVybiBtYXRjaGVzKHZhbCwgbmFtZSk7CiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiR3YXRjaCgnZXhjbHVkZScsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcHJ1bmVDYWNoZShfdGhpcywgZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICByZXR1cm4gIW1hdGNoZXModmFsLCBuYW1lKTsKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuJHdhdGNoKCdleGNsdWRlS2V5cycsIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcHJ1bmVDYWNoZShfdGhpcywgZnVuY3Rpb24gKG5hbWUsIGtleSkgewogICAgICAgIHJldHVybiAhbWF0Y2hlcyh2YWwsIGtleSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcigpIHsKICAgIHZhciBzbG90ID0gdGhpcy4kc2xvdHMuZGVmYXVsdDsKICAgIHZhciB2bm9kZSA9IGdldEZpcnN0Q29tcG9uZW50Q2hpbGQoc2xvdCk7CiAgICB2YXIgY29tcG9uZW50T3B0aW9ucyA9IHZub2RlICYmIHZub2RlLmNvbXBvbmVudE9wdGlvbnM7CgogICAgaWYgKGNvbXBvbmVudE9wdGlvbnMpIHsKICAgICAgLy8gY2hlY2sgcGF0dGVybgogICAgICB2YXIgbmFtZSA9IGdldENvbXBvbmVudE5hbWUoY29tcG9uZW50T3B0aW9ucyk7CiAgICAgIHZhciBjb21wb25lbnRLZXkgPSBnZXRDb21wb25lbnRLZXkodm5vZGUpOwogICAgICB2YXIgaW5jbHVkZSA9IHRoaXMuaW5jbHVkZSwKICAgICAgICAgIGV4Y2x1ZGUgPSB0aGlzLmV4Y2x1ZGUsCiAgICAgICAgICBleGNsdWRlS2V5cyA9IHRoaXMuZXhjbHVkZUtleXM7CgogICAgICBpZiAoIC8vIG5vdCBpbmNsdWRlZAogICAgICBpbmNsdWRlICYmICghbmFtZSB8fCAhbWF0Y2hlcyhpbmNsdWRlLCBuYW1lKSkgfHwgLy8gZXhjbHVkZWQKICAgICAgZXhjbHVkZSAmJiBuYW1lICYmIG1hdGNoZXMoZXhjbHVkZSwgbmFtZSkgfHwgZXhjbHVkZUtleXMgJiYgY29tcG9uZW50S2V5ICYmIG1hdGNoZXMoZXhjbHVkZUtleXMsIGNvbXBvbmVudEtleSkpIHsKICAgICAgICByZXR1cm4gdm5vZGU7CiAgICAgIH0KCiAgICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGUsCiAgICAgICAgICBrZXlzID0gdGhpcy5rZXlzOwogICAgICB2YXIga2V5ID0gdm5vZGUua2V5ID09IG51bGwgLy8gc2FtZSBjb25zdHJ1Y3RvciBtYXkgZ2V0IHJlZ2lzdGVyZWQgYXMgZGlmZmVyZW50IGxvY2FsIGNvbXBvbmVudHMKICAgICAgLy8gc28gY2lkIGFsb25lIGlzIG5vdCBlbm91Z2ggKCMzMjY5KQogICAgICA/IGNvbXBvbmVudE9wdGlvbnMuQ3Rvci5jaWQgKyAoY29tcG9uZW50T3B0aW9ucy50YWcgPyAiOjoiLmNvbmNhdChjb21wb25lbnRPcHRpb25zLnRhZykgOiAnJykgOiB2bm9kZS5rZXkgKyBjb21wb25lbnRPcHRpb25zLkN0b3IuY2lkOwoKICAgICAgaWYgKGNhY2hlW2tleV0pIHsKICAgICAgICB2bm9kZS5jb21wb25lbnRJbnN0YW5jZSA9IGNhY2hlW2tleV0uY29tcG9uZW50SW5zdGFuY2U7IC8vIG1ha2UgY3VycmVudCBrZXkgZnJlc2hlc3QKCiAgICAgICAgcmVtb3ZlKGtleXMsIGtleSk7CiAgICAgICAga2V5cy5wdXNoKGtleSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FjaGVba2V5XSA9IHZub2RlOwogICAgICAgIGtleXMucHVzaChrZXkpOyAvLyBwcnVuZSBvbGRlc3QgZW50cnkKCiAgICAgICAgaWYgKHRoaXMubWF4ICYmIGtleXMubGVuZ3RoID4gcGFyc2VJbnQodGhpcy5tYXgpKSB7CiAgICAgICAgICBwcnVuZUNhY2hlRW50cnkoY2FjaGUsIGtleXNbMF0sIGtleXMsIHRoaXMuX3Zub2RlKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZub2RlLmRhdGEua2VlcEFsaXZlID0gdHJ1ZTsKICAgIH0KCiAgICByZXR1cm4gdm5vZGUgfHwgc2xvdCAmJiBzbG90WzBdOwogIH0KfTs="},{"version":3,"sources":["D:/Project/spiderPlatform/spider_platform/src/components/cache/AKeepAlive.js"],"names":["isDef","isRegExp","remove","patternTypes","String","RegExp","Array","matches","pattern","name","isArray","indexOf","item","test","split","getComponentName","opts","Ctor","options","tag","getComponentKey","vnode","componentOptions","key","cid","getFirstComponentChild","children","i","length","c","isAsyncPlaceholder","pruneCache","keepAliveInstance","filter","cache","keys","_vnode","cachedNode","componentKey","pruneCacheEntry","pruneCacheEntry2","cached","componentInstance","$destroy","current","abstract","model","prop","event","props","include","exclude","excludeKeys","max","Number","clearCaches","watch","val","forEach","$emit","created","Object","create","destroyed","mounted","$watch","render","slot","$slots","default","push","parseInt","data","keepAlive"],"mappings":"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","sourcesContent":["import {isDef, isRegExp, remove} from '@/utils/util'\r\n\r\nconst patternTypes = [String, RegExp, Array]\r\n\r\nfunction matches (pattern, name) {\r\n  if (Array.isArray(pattern)) {\r\n    if (pattern.indexOf(name) > -1) {\r\n      return true\r\n    } else {\r\n      for (let item of pattern) {\r\n        if (isRegExp(item) && item.test(name)) {\r\n          return true\r\n        }\r\n      }\r\n      return false\r\n    }\r\n  } else if (typeof pattern === 'string') {\r\n    return pattern.split(',').indexOf(name) > -1\r\n  } else if (isRegExp(pattern)) {\r\n    return pattern.test(name)\r\n  }\r\n  /* istanbul ignore next */\r\n  return false\r\n}\r\n\r\nfunction getComponentName (opts) {\r\n  return opts && (opts.Ctor.options.name || opts.tag)\r\n}\r\n\r\nfunction getComponentKey (vnode) {\r\n  const {componentOptions, key} = vnode\r\n  return key == null\r\n    ? componentOptions.Ctor.cid + (componentOptions.tag ? `::${componentOptions.tag}` : '')\r\n    : key + componentOptions.Ctor.cid\r\n}\r\n\r\nfunction getFirstComponentChild (children) {\r\n  if (Array.isArray(children)) {\r\n    for (let i = 0; i < children.length; i++) {\r\n      const c = children[i]\r\n      if (isDef(c) && (isDef(c.componentOptions) || c.isAsyncPlaceholder)) {\r\n        return c\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction pruneCache (keepAliveInstance, filter) {\r\n  const { cache, keys, _vnode } = keepAliveInstance\r\n  for (const key in cache) {\r\n    const cachedNode = cache[key]\r\n    if (cachedNode) {\r\n      const name = getComponentName(cachedNode.componentOptions)\r\n      const componentKey = getComponentKey(cachedNode)\r\n      if (name && !filter(name, componentKey)) {\r\n        pruneCacheEntry(cache, key, keys, _vnode)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction pruneCacheEntry2(cache, key, keys) {\r\n  const cached = cache[key]\r\n  if (cached) {\r\n    cached.componentInstance.$destroy()\r\n  }\r\n  cache[key] = null\r\n  remove(keys, key)\r\n}\r\n\r\nfunction pruneCacheEntry (cache, key, keys, current) {\r\n  const cached = cache[key]\r\n  if (cached && (!current || cached.tag !== current.tag)) {\r\n    cached.componentInstance.$destroy()\r\n  }\r\n  cache[key] = null\r\n  remove(keys, key)\r\n}\r\n\r\nexport default {\r\n  name: 'AKeepAlive',\r\n  abstract: true,\r\n  model: {\r\n    prop: 'clearCaches',\r\n    event: 'clear',\r\n  },\r\n  props: {\r\n    include: patternTypes,\r\n    exclude: patternTypes,\r\n    excludeKeys: patternTypes,\r\n    max: [String, Number],\r\n    clearCaches: Array\r\n  },\r\n  watch: {\r\n    clearCaches: function(val) {\r\n      if (val && val.length > 0) {\r\n        const {cache, keys} = this\r\n        val.forEach(key => {\r\n          pruneCacheEntry2(cache, key, keys)\r\n        })\r\n        this.$emit('clear', [])\r\n      }\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.cache = Object.create(null)\r\n    this.keys = []\r\n  },\r\n\r\n  destroyed () {\r\n    for (const key in this.cache) {\r\n      pruneCacheEntry(this.cache, key, this.keys)\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    this.$watch('include', val => {\r\n      pruneCache(this, (name) => matches(val, name))\r\n    })\r\n    this.$watch('exclude', val => {\r\n      pruneCache(this, (name) => !matches(val, name))\r\n    })\r\n    this.$watch('excludeKeys', val => {\r\n      pruneCache(this, (name, key) => !matches(val, key))\r\n    })\r\n  },\r\n\r\n  render () {\r\n    const slot = this.$slots.default\r\n    const vnode = getFirstComponentChild(slot)\r\n    const componentOptions = vnode && vnode.componentOptions\r\n    if (componentOptions) {\r\n      // check pattern\r\n      const name = getComponentName(componentOptions)\r\n      const componentKey = getComponentKey(vnode)\r\n      const { include, exclude, excludeKeys } = this\r\n      if (\r\n        // not included\r\n        (include && (!name || !matches(include, name))) ||\r\n        // excluded\r\n        (exclude && name && matches(exclude, name)) ||\r\n        (excludeKeys && componentKey && matches(excludeKeys, componentKey))\r\n      ) {\r\n        return vnode\r\n      }\r\n\r\n      const { cache, keys } = this\r\n      const key = vnode.key == null\r\n        // same constructor may get registered as different local components\r\n        // so cid alone is not enough (#3269)\r\n        ? componentOptions.Ctor.cid + (componentOptions.tag ? `::${componentOptions.tag}` : '')\r\n        : vnode.key + componentOptions.Ctor.cid\r\n      if (cache[key]) {\r\n        vnode.componentInstance = cache[key].componentInstance\r\n        // make current key freshest\r\n        remove(keys, key)\r\n        keys.push(key)\r\n      } else {\r\n        cache[key] = vnode\r\n        keys.push(key)\r\n        // prune oldest entry\r\n        if (this.max && keys.length > parseInt(this.max)) {\r\n          pruneCacheEntry(cache, keys[0], keys, this._vnode)\r\n        }\r\n      }\r\n\r\n      vnode.data.keepAlive = true\r\n    }\r\n    return vnode || (slot && slot[0])\r\n  }\r\n}\r\n"]}]}