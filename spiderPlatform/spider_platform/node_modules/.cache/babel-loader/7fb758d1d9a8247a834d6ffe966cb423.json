{"remainingRequest":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Project\\spiderPlatform\\spider_platform\\src\\utils\\routerUtil.js","dependencies":[{"path":"D:\\Project\\spiderPlatform\\spider_platform\\src\\utils\\routerUtil.js","mtime":1646988546901},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646988157970},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\babel-loader\\lib\\index.js","mtime":1646988157969},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\eslint-loader\\index.js","mtime":1646988172536}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5saW5rIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiRDovUHJvamVjdC9zcGlkZXJQbGF0Zm9ybS9zcGlkZXJfcGxhdGZvcm0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovUHJvamVjdC9zcGlkZXJQbGF0Zm9ybS9zcGlkZXJfcGxhdGZvcm0vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgX3R5cGVvZiBmcm9tICJEOi9Qcm9qZWN0L3NwaWRlclBsYXRmb3JtL3NwaWRlcl9wbGF0Zm9ybS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IHJvdXRlck1hcCBmcm9tICdAL3JvdXRlci9hc3luYy9yb3V0ZXIubWFwJzsKaW1wb3J0IHsgbWVyZ2VJMThuRnJvbVJvdXRlcyB9IGZyb20gJ0AvdXRpbHMvaTE4bic7CmltcG9ydCBSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBkZWVwTWVyZ2UgZnJvbSAnZGVlcG1lcmdlJzsKaW1wb3J0IGJhc2ljT3B0aW9ucyBmcm9tICdAL3JvdXRlci9hc3luYy9jb25maWcuYXN5bmMnOyAvL+W6lOeUqOmFjee9rgoKdmFyIGFwcE9wdGlvbnMgPSB7CiAgcm91dGVyOiB1bmRlZmluZWQsCiAgaTE4bjogdW5kZWZpbmVkLAogIHN0b3JlOiB1bmRlZmluZWQKfTsKLyoqDQogKiDorr7nva7lupTnlKjphY3nva4NCiAqIEBwYXJhbSBvcHRpb25zDQogKi8KCmZ1bmN0aW9uIHNldEFwcE9wdGlvbnMob3B0aW9ucykgewogIHZhciByb3V0ZXIgPSBvcHRpb25zLnJvdXRlciwKICAgICAgc3RvcmUgPSBvcHRpb25zLnN0b3JlLAogICAgICBpMThuID0gb3B0aW9ucy5pMThuOwogIGFwcE9wdGlvbnMucm91dGVyID0gcm91dGVyOwogIGFwcE9wdGlvbnMuc3RvcmUgPSBzdG9yZTsKICBhcHBPcHRpb25zLmkxOG4gPSBpMThuOwp9Ci8qKg0KICog5qC55o2uIOi3r+eUsemFjee9riDlkowg6Lev55Sx57uE5Lu25rOo5YaMIOino+aekOi3r+eUsQ0KICogQHBhcmFtIHJvdXRlc0NvbmZpZyDot6/nlLHphY3nva4NCiAqIEBwYXJhbSByb3V0ZXJNYXAg5pys5Zyw6Lev55Sx57uE5Lu25rOo5YaM6YWN572uDQogKi8KCgpmdW5jdGlvbiBwYXJzZVJvdXRlcyhyb3V0ZXNDb25maWcsIHJvdXRlck1hcCkgewogIHZhciByb3V0ZXMgPSBbXTsKICByb3V0ZXNDb25maWcuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgLy8g6I635Y+W5rOo5YaM5ZyoIHJvdXRlck1hcCDkuK3nmoQgcm91dGVy77yM5Yid5aeL5YyWIHJvdXRlQ2ZnCiAgICB2YXIgcm91dGVyID0gdW5kZWZpbmVkLAogICAgICAgIHJvdXRlQ2ZnID0ge307CgogICAgaWYgKHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJykgewogICAgICByb3V0ZXIgPSByb3V0ZXJNYXBbaXRlbV07CiAgICAgIHJvdXRlQ2ZnID0gewogICAgICAgIHBhdGg6IHJvdXRlciAmJiByb3V0ZXIucGF0aCB8fCBpdGVtLAogICAgICAgIHJvdXRlcjogaXRlbQogICAgICB9OwogICAgfSBlbHNlIGlmIChfdHlwZW9mKGl0ZW0pID09PSAnb2JqZWN0JykgewogICAgICByb3V0ZXIgPSByb3V0ZXJNYXBbaXRlbS5yb3V0ZXJdOwogICAgICByb3V0ZUNmZyA9IGl0ZW07CiAgICB9CgogICAgaWYgKCFyb3V0ZXIpIHsKICAgICAgY29uc29sZS53YXJuKCJjYW4ndCBmaW5kIHJlZ2lzdGVyIGZvciByb3V0ZXIgIi5jb25jYXQocm91dGVDZmcucm91dGVyLCAiLCBwbGVhc2UgcmVnaXN0ZXIgaXQgaW4gYWR2YW5jZS4iKSk7CiAgICAgIHJvdXRlciA9IHR5cGVvZiBpdGVtID09PSAnc3RyaW5nJyA/IHsKICAgICAgICBwYXRoOiBpdGVtLAogICAgICAgIG5hbWU6IGl0ZW0KICAgICAgfSA6IGl0ZW07CiAgICB9IC8vIOS7jiByb3V0ZXIg5ZKMIHJvdXRlQ2ZnIOino+aekOi3r+eUsQoKCiAgICB2YXIgbWV0YSA9IF9vYmplY3RTcHJlYWQoewogICAgICBhdXRob3JpdHk6IHJvdXRlci5hdXRob3JpdHksCiAgICAgIGljb246IHJvdXRlci5pY29uLAogICAgICBwYWdlOiByb3V0ZXIucGFnZSwKICAgICAgbGluazogcm91dGVyLmxpbmssCiAgICAgIHBhcmFtczogcm91dGVyLnBhcmFtcywKICAgICAgcXVlcnk6IHJvdXRlci5xdWVyeQogICAgfSwgcm91dGVyLm1ldGEpOwoKICAgIHZhciBjZmdNZXRhID0gX29iamVjdFNwcmVhZCh7CiAgICAgIGF1dGhvcml0eTogcm91dGVDZmcuYXV0aG9yaXR5LAogICAgICBpY29uOiByb3V0ZUNmZy5pY29uLAogICAgICBwYWdlOiByb3V0ZUNmZy5wYWdlLAogICAgICBsaW5rOiByb3V0ZUNmZy5saW5rLAogICAgICBwYXJhbXM6IHJvdXRlQ2ZnLnBhcmFtcywKICAgICAgcXVlcnk6IHJvdXRlQ2ZnLnF1ZXJ5CiAgICB9LCByb3V0ZUNmZy5tZXRhKTsKCiAgICBPYmplY3Qua2V5cyhjZmdNZXRhKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgaWYgKGNmZ01ldGFba2V5XSA9PT0gdW5kZWZpbmVkIHx8IGNmZ01ldGFba2V5XSA9PT0gbnVsbCB8fCBjZmdNZXRhW2tleV0gPT09ICcnKSB7CiAgICAgICAgZGVsZXRlIGNmZ01ldGFba2V5XTsKICAgICAgfQogICAgfSk7CiAgICBPYmplY3QuYXNzaWduKG1ldGEsIGNmZ01ldGEpOwogICAgdmFyIHJvdXRlID0gewogICAgICBwYXRoOiByb3V0ZUNmZy5wYXRoIHx8IHJvdXRlci5wYXRoIHx8IHJvdXRlQ2ZnLnJvdXRlciwKICAgICAgbmFtZTogcm91dGVDZmcubmFtZSB8fCByb3V0ZXIubmFtZSwKICAgICAgY29tcG9uZW50OiByb3V0ZXIuY29tcG9uZW50LAogICAgICByZWRpcmVjdDogcm91dGVDZmcucmVkaXJlY3QgfHwgcm91dGVyLnJlZGlyZWN0LAogICAgICBtZXRhOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1ldGEpLCB7fSwgewogICAgICAgIGF1dGhvcml0eTogbWV0YS5hdXRob3JpdHkgfHwgJyonCiAgICAgIH0pCiAgICB9OwoKICAgIGlmIChyb3V0ZUNmZy5pbnZpc2libGUgfHwgcm91dGVyLmludmlzaWJsZSkgewogICAgICByb3V0ZS5tZXRhLmludmlzaWJsZSA9IHRydWU7CiAgICB9CgogICAgaWYgKHJvdXRlQ2ZnLmNoaWxkcmVuICYmIHJvdXRlQ2ZnLmNoaWxkcmVuLmxlbmd0aCA+IDApIHsKICAgICAgcm91dGUuY2hpbGRyZW4gPSBwYXJzZVJvdXRlcyhyb3V0ZUNmZy5jaGlsZHJlbiwgcm91dGVyTWFwKTsKICAgIH0KCiAgICByb3V0ZXMucHVzaChyb3V0ZSk7CiAgfSk7CiAgcmV0dXJuIHJvdXRlczsKfQovKioNCiAqIOWKoOi9vei3r+eUsQ0KICogQHBhcmFtIHJvdXRlc0NvbmZpZyB7Um91dGVDb25maWdbXX0g6Lev55Sx6YWN572uDQogKi8KCgpmdW5jdGlvbiBsb2FkUm91dGVzKHJvdXRlc0NvbmZpZykgewogIC8v5YW85a65IDAuNi4xIOS7peS4i+eJiOacrAoKICAvKioqKioqKioqKioqKioqIOWFvOWuuSB2ZXJzaW9uIDwgdjAuNi4xICoqKioqKioqKioqKioqKioqLwogIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkgewogICAgdmFyIGFyZzAgPSBhcmd1bWVudHNbMF07CgogICAgaWYgKGFyZzAucm91dGVyIHx8IGFyZzAuaTE4biB8fCBhcmcwLnN0b3JlKSB7CiAgICAgIHJvdXRlc0NvbmZpZyA9IGFyZ3VtZW50c1sxXTsKICAgICAgY29uc29sZS5lcnJvcigndGhlIHVzYWdlIG9mIHNpZ25hdHVyZSBsb2FkUm91dGVzKHtyb3V0ZXIsIHN0b3JlLCBpMThufSwgcm91dGVzQ29uZmlnKSBpcyBvdXQgb2YgZGF0ZSwgcGxlYXNlIHVzZSB0aGUgbmV3IHNpZ25hdHVyZTogbG9hZFJvdXRlcyhyb3V0ZXNDb25maWcpLicpOwogICAgICBjb25zb2xlLmVycm9yKCfmlrnms5Xnrb7lkI0gbG9hZFJvdXRlcyh7cm91dGVyLCBzdG9yZSwgaTE4bn0sIHJvdXRlc0NvbmZpZykg55qE55So5rOV5bey6L+H5pe2LCDor7fkvb/nlKjmlrDnmoTmlrnms5Xnrb7lkI0gbG9hZFJvdXRlcyhyb3V0ZXNDb25maWcp44CCJyk7CiAgICB9CiAgfQogIC8qKioqKioqKioqKioqKiog5YW85a65IHZlcnNpb24gPCB2MC42LjEgKioqKioqKioqKioqKioqKiovCiAgLy8g5bqU55So6YWN572uCgoKICB2YXIgcm91dGVyID0gYXBwT3B0aW9ucy5yb3V0ZXIsCiAgICAgIHN0b3JlID0gYXBwT3B0aW9ucy5zdG9yZSwKICAgICAgaTE4biA9IGFwcE9wdGlvbnMuaTE4bjsgLy8g5aaC5p6cIHJvdXRlc0NvbmZpZyDmnInlgLzvvIzliJnmm7TmlrDliLDmnKzlnLDvvIzlkKbliJnku47mnKzlnLDojrflj5YKCiAgaWYgKHJvdXRlc0NvbmZpZykgewogICAgc3RvcmUuY29tbWl0KCdhY2NvdW50L3NldFJvdXRlc0NvbmZpZycsIHJvdXRlc0NvbmZpZyk7CiAgfSBlbHNlIHsKICAgIHJvdXRlc0NvbmZpZyA9IHN0b3JlLmdldHRlcnNbJ2FjY291bnQvcm91dGVzQ29uZmlnJ107CiAgfSAvLyDlpoLmnpzlvIDlkK/kuoblvILmraXot6/nlLHvvIzliJnliqDovb3lvILmraXot6/nlLHphY3nva4KCgogIHZhciBhc3luY1JvdXRlcyA9IHN0b3JlLnN0YXRlLnNldHRpbmcuYXN5bmNSb3V0ZXM7CgogIGlmIChhc3luY1JvdXRlcykgewogICAgaWYgKHJvdXRlc0NvbmZpZyAmJiByb3V0ZXNDb25maWcubGVuZ3RoID4gMCkgewogICAgICB2YXIgcm91dGVzID0gcGFyc2VSb3V0ZXMocm91dGVzQ29uZmlnLCByb3V0ZXJNYXApOwogICAgICB2YXIgZmluYWxSb3V0ZXMgPSBtZXJnZVJvdXRlcyhiYXNpY09wdGlvbnMucm91dGVzLCByb3V0ZXMpOwogICAgICBmb3JtYXRSb3V0ZXMoZmluYWxSb3V0ZXMpOwogICAgICByb3V0ZXIub3B0aW9ucyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgcm91dGVyLm9wdGlvbnMpLCB7fSwgewogICAgICAgIHJvdXRlczogZmluYWxSb3V0ZXMKICAgICAgfSk7CiAgICAgIHJvdXRlci5tYXRjaGVyID0gbmV3IFJvdXRlcihfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHJvdXRlci5vcHRpb25zKSwge30sIHsKICAgICAgICByb3V0ZXM6IFtdCiAgICAgIH0pKS5tYXRjaGVyOwogICAgICByb3V0ZXIuYWRkUm91dGVzKGZpbmFsUm91dGVzKTsKICAgIH0KICB9IC8vIOaPkOWPlui3r+eUseWbvemZheWMluaVsOaNrgoKCiAgbWVyZ2VJMThuRnJvbVJvdXRlcyhpMThuLCByb3V0ZXIub3B0aW9ucy5yb3V0ZXMpOyAvLyDliJ3lp4vljJZBZG1pbuWQjuWPsOiPnOWNleaVsOaNrgoKICB2YXIgcm9vdFJvdXRlID0gcm91dGVyLm9wdGlvbnMucm91dGVzLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBpdGVtLnBhdGggPT09ICcvJzsKICB9KTsKICB2YXIgbWVudVJvdXRlcyA9IHJvb3RSb3V0ZSAmJiByb290Um91dGUuY2hpbGRyZW47CgogIGlmIChtZW51Um91dGVzKSB7CiAgICBzdG9yZS5jb21taXQoJ3NldHRpbmcvc2V0TWVudURhdGEnLCBtZW51Um91dGVzKTsKICB9Cn0KLyoqDQogKiDlkIjlubbot6/nlLENCiAqIEBwYXJhbSB0YXJnZXQge1JvdXRlW119DQogKiBAcGFyYW0gc291cmNlIHtSb3V0ZVtdfQ0KICogQHJldHVybnMge1JvdXRlW119DQogKi8KCgpmdW5jdGlvbiBtZXJnZVJvdXRlcyh0YXJnZXQsIHNvdXJjZSkgewogIHZhciByb3V0ZXNNYXAgPSB7fTsKICB0YXJnZXQuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIHJvdXRlc01hcFtpdGVtLnBhdGhdID0gaXRlbTsKICB9KTsKICBzb3VyY2UuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuIHJvdXRlc01hcFtpdGVtLnBhdGhdID0gaXRlbTsKICB9KTsKICByZXR1cm4gT2JqZWN0LnZhbHVlcyhyb3V0ZXNNYXApOwp9Ci8qKg0KICog5rex5bqm5ZCI5bm26Lev55SxDQogKiBAcGFyYW0gdGFyZ2V0IHtSb3V0ZVtdfQ0KICogQHBhcmFtIHNvdXJjZSB7Um91dGVbXX0NCiAqIEByZXR1cm5zIHtSb3V0ZVtdfQ0KICovCgoKZnVuY3Rpb24gZGVlcE1lcmdlUm91dGVzKHRhcmdldCwgc291cmNlKSB7CiAgLy8g5pig5bCE6Lev55Sx5pWw57uECiAgdmFyIG1hcFJvdXRlcyA9IGZ1bmN0aW9uIG1hcFJvdXRlcyhyb3V0ZXMpIHsKICAgIHZhciByb3V0ZXNNYXAgPSB7fTsKICAgIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJvdXRlc01hcFtpdGVtLnBhdGhdID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpdGVtKSwge30sIHsKICAgICAgICBjaGlsZHJlbjogaXRlbS5jaGlsZHJlbiA/IG1hcFJvdXRlcyhpdGVtLmNoaWxkcmVuKSA6IHVuZGVmaW5lZAogICAgICB9KTsKICAgIH0pOwogICAgcmV0dXJuIHJvdXRlc01hcDsKICB9OwoKICB2YXIgdGFyTWFwID0gbWFwUm91dGVzKHRhcmdldCk7CiAgdmFyIHNyY01hcCA9IG1hcFJvdXRlcyhzb3VyY2UpOyAvLyDlkIjlubbot6/nlLEKCiAgdmFyIG1lcmdlID0gZGVlcE1lcmdlKHRhck1hcCwgc3JjTWFwKTsgLy8g6L2s5o2i5Li6IHJvdXRlcyDmlbDnu4QKCiAgdmFyIHBhcnNlUm91dGVzTWFwID0gZnVuY3Rpb24gcGFyc2VSb3V0ZXNNYXAocm91dGVzTWFwKSB7CiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhyb3V0ZXNNYXApLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICBpZiAoaXRlbS5jaGlsZHJlbikgewogICAgICAgIGl0ZW0uY2hpbGRyZW4gPSBwYXJzZVJvdXRlc01hcChpdGVtLmNoaWxkcmVuKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkZWxldGUgaXRlbS5jaGlsZHJlbjsKICAgICAgfQoKICAgICAgcmV0dXJuIGl0ZW07CiAgICB9KTsKICB9OwoKICByZXR1cm4gcGFyc2VSb3V0ZXNNYXAobWVyZ2UpOwp9Ci8qKg0KICog5qC85byP5YyW6Lev55SxDQogKiBAcGFyYW0gcm91dGVzIOi3r+eUsemFjee9rg0KICovCgoKZnVuY3Rpb24gZm9ybWF0Um91dGVzKHJvdXRlcykgewogIHJvdXRlcy5mb3JFYWNoKGZ1bmN0aW9uIChyb3V0ZSkgewogICAgdmFyIHBhdGggPSByb3V0ZS5wYXRoOwoKICAgIGlmICghcGF0aC5zdGFydHNXaXRoKCcvJykgJiYgcGF0aCAhPT0gJyonKSB7CiAgICAgIHJvdXRlLnBhdGggPSAnLycgKyBwYXRoOwogICAgfQogIH0pOwogIGZvcm1hdEF1dGhvcml0eShyb3V0ZXMpOwp9Ci8qKg0KICog5qC85byP5YyW6Lev55Sx55qE5p2D6ZmQ6YWN572uDQogKiBAcGFyYW0gcm91dGVzIOi3r+eUsQ0KICogQHBhcmFtIHBBdXRob3JpdGllcyDniLbnuqfot6/nlLHmnYPpmZDphY3nva7pm4blkIgNCiAqLwoKCmZ1bmN0aW9uIGZvcm1hdEF1dGhvcml0eShyb3V0ZXMpIHsKICB2YXIgcEF1dGhvcml0aWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgIHZhciBtZXRhID0gcm91dGUubWV0YTsKICAgIHZhciBkZWZhdWx0QXV0aG9yaXR5ID0gcEF1dGhvcml0aWVzW3BBdXRob3JpdGllcy5sZW5ndGggLSAxXSB8fCB7CiAgICAgIHBlcm1pc3Npb246ICcqJwogICAgfTsKCiAgICBpZiAobWV0YSkgewogICAgICB2YXIgYXV0aG9yaXR5ID0ge307CgogICAgICBpZiAoIW1ldGEuYXV0aG9yaXR5KSB7CiAgICAgICAgYXV0aG9yaXR5ID0gZGVmYXVsdEF1dGhvcml0eTsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgbWV0YS5hdXRob3JpdHkgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgYXV0aG9yaXR5LnBlcm1pc3Npb24gPSBtZXRhLmF1dGhvcml0eTsKICAgICAgfSBlbHNlIGlmIChfdHlwZW9mKG1ldGEuYXV0aG9yaXR5KSA9PT0gJ29iamVjdCcpIHsKICAgICAgICBhdXRob3JpdHkgPSBtZXRhLmF1dGhvcml0eTsKICAgICAgICB2YXIgX2F1dGhvcml0eSA9IGF1dGhvcml0eSwKICAgICAgICAgICAgcm9sZSA9IF9hdXRob3JpdHkucm9sZTsKCiAgICAgICAgaWYgKHR5cGVvZiByb2xlID09PSAnc3RyaW5nJykgewogICAgICAgICAgYXV0aG9yaXR5LnJvbGUgPSBbcm9sZV07CiAgICAgICAgfQoKICAgICAgICBpZiAoIWF1dGhvcml0eS5wZXJtaXNzaW9uICYmICFhdXRob3JpdHkucm9sZSkgewogICAgICAgICAgYXV0aG9yaXR5ID0gZGVmYXVsdEF1dGhvcml0eTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIG1ldGEuYXV0aG9yaXR5ID0gYXV0aG9yaXR5OwogICAgfSBlbHNlIHsKICAgICAgdmFyIF9hdXRob3JpdHkyID0gZGVmYXVsdEF1dGhvcml0eTsKICAgICAgcm91dGUubWV0YSA9IHsKICAgICAgICBhdXRob3JpdHk6IF9hdXRob3JpdHkyCiAgICAgIH07CiAgICB9CgogICAgcm91dGUubWV0YS5wQXV0aG9yaXRpZXMgPSBwQXV0aG9yaXRpZXM7CgogICAgaWYgKHJvdXRlLmNoaWxkcmVuKSB7CiAgICAgIGZvcm1hdEF1dGhvcml0eShyb3V0ZS5jaGlsZHJlbiwgW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwQXV0aG9yaXRpZXMpLCBbcm91dGUubWV0YS5hdXRob3JpdHldKSk7CiAgICB9CiAgfSk7Cn0KLyoqDQogKiDku47ot6/nlLEgcGF0aCDop6PmnpAgaTE4biBrZXkNCiAqIEBwYXJhbSBwYXRoDQogKiBAcmV0dXJucyB7Kn0NCiAqLwoKCmZ1bmN0aW9uIGdldEkxOG5LZXkocGF0aCkgewogIHZhciBrZXlzID0gcGF0aC5zcGxpdCgnLycpLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkgewogICAgcmV0dXJuICFpdGVtLnN0YXJ0c1dpdGgoJzonKSAmJiBpdGVtICE9ICcnOwogIH0pOwogIGtleXMucHVzaCgnbmFtZScpOwogIHJldHVybiBrZXlzLmpvaW4oJy4nKTsKfQovKioNCiAqIOWKoOi9veWvvOiIquWuiOWNqw0KICogQHBhcmFtIGd1YXJkcw0KICogQHBhcmFtIG9wdGlvbnMNCiAqLwoKCmZ1bmN0aW9uIGxvYWRHdWFyZHMoZ3VhcmRzLCBvcHRpb25zKSB7CiAgdmFyIGJlZm9yZUVhY2ggPSBndWFyZHMuYmVmb3JlRWFjaCwKICAgICAgYWZ0ZXJFYWNoID0gZ3VhcmRzLmFmdGVyRWFjaDsKICB2YXIgcm91dGVyID0gb3B0aW9ucy5yb3V0ZXI7CiAgYmVmb3JlRWFjaC5mb3JFYWNoKGZ1bmN0aW9uIChndWFyZCkgewogICAgaWYgKGd1YXJkICYmIHR5cGVvZiBndWFyZCA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByb3V0ZXIuYmVmb3JlRWFjaChmdW5jdGlvbiAodG8sIGZyb20sIG5leHQpIHsKICAgICAgICByZXR1cm4gZ3VhcmQodG8sIGZyb20sIG5leHQsIG9wdGlvbnMpOwogICAgICB9KTsKICAgIH0KICB9KTsKICBhZnRlckVhY2guZm9yRWFjaChmdW5jdGlvbiAoZ3VhcmQpIHsKICAgIGlmIChndWFyZCAmJiB0eXBlb2YgZ3VhcmQgPT09ICdmdW5jdGlvbicpIHsKICAgICAgcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAodG8sIGZyb20pIHsKICAgICAgICByZXR1cm4gZ3VhcmQodG8sIGZyb20sIG9wdGlvbnMpOwogICAgICB9KTsKICAgIH0KICB9KTsKfQoKZXhwb3J0IHsgcGFyc2VSb3V0ZXMsIGxvYWRSb3V0ZXMsIGZvcm1hdEF1dGhvcml0eSwgZ2V0STE4bktleSwgbG9hZEd1YXJkcywgZGVlcE1lcmdlUm91dGVzLCBmb3JtYXRSb3V0ZXMsIHNldEFwcE9wdGlvbnMgfTs="},{"version":3,"sources":["D:/Project/spiderPlatform/spider_platform/src/utils/routerUtil.js"],"names":["routerMap","mergeI18nFromRoutes","Router","deepMerge","basicOptions","appOptions","router","undefined","i18n","store","setAppOptions","options","parseRoutes","routesConfig","routes","forEach","item","routeCfg","path","console","warn","name","meta","authority","icon","page","link","params","query","cfgMeta","Object","keys","key","assign","route","component","redirect","invisible","children","length","push","loadRoutes","arguments","arg0","error","commit","getters","asyncRoutes","state","setting","finalRoutes","mergeRoutes","formatRoutes","matcher","addRoutes","rootRoute","find","menuRoutes","target","source","routesMap","values","deepMergeRoutes","mapRoutes","tarMap","srcMap","merge","parseRoutesMap","map","startsWith","formatAuthority","pAuthorities","defaultAuthority","permission","role","getI18nKey","split","filter","join","loadGuards","guards","beforeEach","afterEach","guard","to","from","next"],"mappings":"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","sourcesContent":["import routerMap from '@/router/async/router.map'\r\nimport {mergeI18nFromRoutes} from '@/utils/i18n'\r\nimport Router from 'vue-router'\r\nimport deepMerge from 'deepmerge'\r\nimport basicOptions from '@/router/async/config.async'\r\n\r\n//应用配置\r\nlet appOptions = {\r\n  router: undefined,\r\n  i18n: undefined,\r\n  store: undefined\r\n}\r\n\r\n/**\r\n * 设置应用配置\r\n * @param options\r\n */\r\nfunction setAppOptions(options) {\r\n  const {router, store, i18n} = options\r\n  appOptions.router = router\r\n  appOptions.store = store\r\n  appOptions.i18n = i18n\r\n}\r\n\r\n/**\r\n * 根据 路由配置 和 路由组件注册 解析路由\r\n * @param routesConfig 路由配置\r\n * @param routerMap 本地路由组件注册配置\r\n */\r\nfunction parseRoutes(routesConfig, routerMap) {\r\n  let routes = []\r\n  routesConfig.forEach(item => {\r\n    // 获取注册在 routerMap 中的 router，初始化 routeCfg\r\n    let router = undefined, routeCfg = {}\r\n    if (typeof item === 'string') {\r\n      router = routerMap[item]\r\n      routeCfg = {path: (router && router.path) || item, router: item}\r\n    } else if (typeof item === 'object') {\r\n      router = routerMap[item.router]\r\n      routeCfg = item\r\n    }\r\n    if (!router) {\r\n      console.warn(`can't find register for router ${routeCfg.router}, please register it in advance.`)\r\n      router = typeof item === 'string' ? {path: item, name: item} : item\r\n    }\r\n    // 从 router 和 routeCfg 解析路由\r\n    const meta = {\r\n      authority: router.authority,\r\n      icon: router.icon,\r\n      page: router.page,\r\n      link: router.link,\r\n      params: router.params,\r\n      query: router.query,\r\n      ...router.meta\r\n    }\r\n    const cfgMeta = {\r\n      authority: routeCfg.authority,\r\n      icon: routeCfg.icon,\r\n      page: routeCfg.page,\r\n      link: routeCfg.link,\r\n      params: routeCfg.params,\r\n      query: routeCfg.query,\r\n      ...routeCfg.meta\r\n    }\r\n    Object.keys(cfgMeta).forEach(key => {\r\n      if (cfgMeta[key] === undefined || cfgMeta[key] === null || cfgMeta[key] === '') {\r\n        delete cfgMeta[key]\r\n      }\r\n    })\r\n    Object.assign(meta, cfgMeta)\r\n    const route = {\r\n      path: routeCfg.path || router.path || routeCfg.router,\r\n      name: routeCfg.name || router.name,\r\n      component: router.component,\r\n      redirect: routeCfg.redirect || router.redirect,\r\n      meta: {...meta, authority: meta.authority || '*'}\r\n    }\r\n    if (routeCfg.invisible || router.invisible) {\r\n      route.meta.invisible = true\r\n    }\r\n    if (routeCfg.children && routeCfg.children.length > 0) {\r\n      route.children = parseRoutes(routeCfg.children, routerMap)\r\n    }\r\n    routes.push(route)\r\n  })\r\n  return routes\r\n}\r\n\r\n/**\r\n * 加载路由\r\n * @param routesConfig {RouteConfig[]} 路由配置\r\n */\r\nfunction loadRoutes(routesConfig) {\r\n  //兼容 0.6.1 以下版本\r\n  /*************** 兼容 version < v0.6.1 *****************/\r\n  if (arguments.length > 0) {\r\n    const arg0 = arguments[0]\r\n    if (arg0.router || arg0.i18n || arg0.store) {\r\n      routesConfig = arguments[1]\r\n      console.error('the usage of signature loadRoutes({router, store, i18n}, routesConfig) is out of date, please use the new signature: loadRoutes(routesConfig).')\r\n      console.error('方法签名 loadRoutes({router, store, i18n}, routesConfig) 的用法已过时, 请使用新的方法签名 loadRoutes(routesConfig)。')\r\n    }\r\n  }\r\n  /*************** 兼容 version < v0.6.1 *****************/\r\n\r\n  // 应用配置\r\n  const {router, store, i18n} = appOptions\r\n\r\n  // 如果 routesConfig 有值，则更新到本地，否则从本地获取\r\n  if (routesConfig) {\r\n    store.commit('account/setRoutesConfig', routesConfig)\r\n  } else {\r\n    routesConfig = store.getters['account/routesConfig']\r\n  }\r\n  // 如果开启了异步路由，则加载异步路由配置\r\n  const asyncRoutes = store.state.setting.asyncRoutes\r\n  if (asyncRoutes) {\r\n    if (routesConfig && routesConfig.length > 0) {\r\n      const routes = parseRoutes(routesConfig, routerMap)\r\n      const finalRoutes = mergeRoutes(basicOptions.routes, routes)\r\n      formatRoutes(finalRoutes)\r\n      router.options = {...router.options, routes: finalRoutes}\r\n      router.matcher = new Router({...router.options, routes:[]}).matcher\r\n      router.addRoutes(finalRoutes)\r\n    }\r\n  }\r\n  // 提取路由国际化数据\r\n  mergeI18nFromRoutes(i18n, router.options.routes)\r\n  // 初始化Admin后台菜单数据\r\n  const rootRoute = router.options.routes.find(item => item.path === '/')\r\n  const menuRoutes = rootRoute && rootRoute.children\r\n  if (menuRoutes) {\r\n    store.commit('setting/setMenuData', menuRoutes)\r\n  }\r\n}\r\n\r\n/**\r\n * 合并路由\r\n * @param target {Route[]}\r\n * @param source {Route[]}\r\n * @returns {Route[]}\r\n */\r\nfunction mergeRoutes(target, source) {\r\n  const routesMap = {}\r\n  target.forEach(item => routesMap[item.path] = item)\r\n  source.forEach(item => routesMap[item.path] = item)\r\n  return Object.values(routesMap)\r\n}\r\n\r\n/**\r\n * 深度合并路由\r\n * @param target {Route[]}\r\n * @param source {Route[]}\r\n * @returns {Route[]}\r\n */\r\nfunction deepMergeRoutes(target, source) {\r\n  // 映射路由数组\r\n  const mapRoutes = routes => {\r\n    const routesMap = {}\r\n    routes.forEach(item => {\r\n      routesMap[item.path] = {\r\n        ...item,\r\n        children: item.children ? mapRoutes(item.children) : undefined\r\n      }\r\n    })\r\n    return routesMap\r\n  }\r\n  const tarMap = mapRoutes(target)\r\n  const srcMap = mapRoutes(source)\r\n\r\n  // 合并路由\r\n  const merge = deepMerge(tarMap, srcMap)\r\n\r\n  // 转换为 routes 数组\r\n  const parseRoutesMap = routesMap => {\r\n    return Object.values(routesMap).map(item => {\r\n      if (item.children) {\r\n        item.children = parseRoutesMap(item.children)\r\n      } else {\r\n        delete item.children\r\n      }\r\n      return item\r\n    })\r\n  }\r\n  return parseRoutesMap(merge)\r\n}\r\n\r\n/**\r\n * 格式化路由\r\n * @param routes 路由配置\r\n */\r\nfunction formatRoutes(routes) {\r\n  routes.forEach(route => {\r\n    const {path} = route\r\n    if (!path.startsWith('/') && path !== '*') {\r\n      route.path = '/' + path\r\n    }\r\n  })\r\n  formatAuthority(routes)\r\n}\r\n\r\n/**\r\n * 格式化路由的权限配置\r\n * @param routes 路由\r\n * @param pAuthorities 父级路由权限配置集合\r\n */\r\nfunction formatAuthority(routes, pAuthorities = []) {\r\n  routes.forEach(route => {\r\n    const meta = route.meta\r\n    const defaultAuthority = pAuthorities[pAuthorities.length - 1] || {permission: '*'}\r\n    if (meta) {\r\n      let authority = {}\r\n      if (!meta.authority) {\r\n        authority = defaultAuthority\r\n      }else if (typeof meta.authority === 'string') {\r\n        authority.permission = meta.authority\r\n      } else if (typeof meta.authority === 'object') {\r\n        authority = meta.authority\r\n        const {role} = authority\r\n        if (typeof role === 'string') {\r\n          authority.role = [role]\r\n        }\r\n        if (!authority.permission && !authority.role) {\r\n          authority = defaultAuthority\r\n        }\r\n      }\r\n      meta.authority = authority\r\n    } else {\r\n      const authority = defaultAuthority\r\n      route.meta = {authority}\r\n    }\r\n    route.meta.pAuthorities = pAuthorities\r\n    if (route.children) {\r\n      formatAuthority(route.children, [...pAuthorities, route.meta.authority])\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 从路由 path 解析 i18n key\r\n * @param path\r\n * @returns {*}\r\n */\r\nfunction getI18nKey(path) {\r\n  const keys = path.split('/').filter(item => !item.startsWith(':') && item != '')\r\n  keys.push('name')\r\n  return keys.join('.')\r\n}\r\n\r\n/**\r\n * 加载导航守卫\r\n * @param guards\r\n * @param options\r\n */\r\nfunction loadGuards(guards, options) {\r\n  const {beforeEach, afterEach} = guards\r\n  const {router} = options\r\n  beforeEach.forEach(guard => {\r\n    if (guard && typeof guard === 'function') {\r\n      router.beforeEach((to, from, next) => guard(to, from, next, options))\r\n    }\r\n  })\r\n  afterEach.forEach(guard => {\r\n    if (guard && typeof guard === 'function') {\r\n      router.afterEach((to, from) => guard(to, from, options))\r\n    }\r\n  })\r\n}\r\n\r\nexport {parseRoutes, loadRoutes, formatAuthority, getI18nKey, loadGuards, deepMergeRoutes, formatRoutes, setAppOptions}\r\n"]}]}