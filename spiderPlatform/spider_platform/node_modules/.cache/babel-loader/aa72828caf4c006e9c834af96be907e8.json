{"remainingRequest":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Project\\spiderPlatform\\spider_platform\\src\\utils\\i18n.js","dependencies":[{"path":"D:\\Project\\spiderPlatform\\spider_platform\\src\\utils\\i18n.js","mtime":1646988546900},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646988157970},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\babel-loader\\lib\\index.js","mtime":1646988157969},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\eslint-loader\\index.js","mtime":1646988172536}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBWdWVJMThuIGZyb20gJ3Z1ZS1pMThuJzsKaW1wb3J0IHJvdXRlc0kxOG4gZnJvbSAnQC9yb3V0ZXIvaTE4bic7CmltcG9ydCAnLi9PYmplY3RzJzsKaW1wb3J0IHsgZ2V0STE4bktleSB9IGZyb20gJ0AvdXRpbHMvcm91dGVyVXRpbCc7Ci8qKg0KICog5Yib5bu6IGkxOG4g6YWN572uDQogKiBAcGFyYW0gbG9jYWxlIOacrOWcsOWMluivreiogA0KICogQHBhcmFtIGZhbGxiYWNrIOWbnumAgOivreiogA0KICogQHJldHVybnMge1Z1ZUkxOG59DQogKi8KCmZ1bmN0aW9uIGluaXRJMThuKGxvY2FsZSwgZmFsbGJhY2spIHsKICBWdWUudXNlKFZ1ZUkxOG4pOwogIHZhciBpMThuT3B0aW9ucyA9IHsKICAgIGxvY2FsZTogbG9jYWxlLAogICAgZmFsbGJhY2tMb2NhbGU6IGZhbGxiYWNrLAogICAgc2lsZW50RmFsbGJhY2tXYXJuOiB0cnVlCiAgfTsKICByZXR1cm4gbmV3IFZ1ZUkxOG4oaTE4bk9wdGlvbnMpOwp9Ci8qKg0KICog5qC55o2uIHJvdXRlciBvcHRpb25zIOmFjee9rueUn+aIkCDlm73pmYXljJbor63oqIANCiAqIEBwYXJhbSBsYW5nDQogKiBAcGFyYW0gcm91dGVzDQogKiBAcGFyYW0gdmFsdWVLZXkNCiAqIEByZXR1cm5zIHsqfQ0KICovCgoKZnVuY3Rpb24gZ2VuZXJhdGVJMThuKGxhbmcsIHJvdXRlcywgdmFsdWVLZXkpIHsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgIHZhciBrZXlzID0gZ2V0STE4bktleShyb3V0ZS5mdWxsUGF0aCkuc3BsaXQoJy4nKTsKICAgIHZhciB2YWx1ZSA9IHZhbHVlS2V5ID09PSAncGF0aCcgPyByb3V0ZVt2YWx1ZUtleV0uc3BsaXQoJy8nKS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgcmV0dXJuICFpdGVtLnN0YXJ0c1dpdGgoJzonKSAmJiBpdGVtICE9ICcnOwogICAgfSkuam9pbignLicpIDogcm91dGVbdmFsdWVLZXldOwogICAgbGFuZy5hc3NpZ25Qcm9wcyhrZXlzLCB2YWx1ZSk7CgogICAgaWYgKHJvdXRlLmNoaWxkcmVuKSB7CiAgICAgIGdlbmVyYXRlSTE4bihsYW5nLCByb3V0ZS5jaGlsZHJlbiwgdmFsdWVLZXkpOwogICAgfQogIH0pOwogIHJldHVybiBsYW5nOwp9Ci8qKg0KICog5qC85byP5YyWIHJvdXRlci5vcHRpb25zLnJvdXRlc++8jOeUn+aIkCBmdWxsUGF0aA0KICogQHBhcmFtIHJvdXRlcw0KICogQHBhcmFtIHBhcmVudFBhdGgNCiAqLwoKCmZ1bmN0aW9uIGZvcm1hdEZ1bGxQYXRoKHJvdXRlcykgewogIHZhciBwYXJlbnRQYXRoID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnJzsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgIHZhciBpc0Z1bGxQYXRoID0gcm91dGUucGF0aC5zdWJzdHJpbmcoMCwgMSkgPT09ICcvJzsKICAgIHJvdXRlLmZ1bGxQYXRoID0gaXNGdWxsUGF0aCA/IHJvdXRlLnBhdGggOiBwYXJlbnRQYXRoID09PSAnLycgPyBwYXJlbnRQYXRoICsgcm91dGUucGF0aCA6IHBhcmVudFBhdGggKyAnLycgKyByb3V0ZS5wYXRoOwoKICAgIGlmIChyb3V0ZS5jaGlsZHJlbikgewogICAgICBmb3JtYXRGdWxsUGF0aChyb3V0ZS5jaGlsZHJlbiwgcm91dGUuZnVsbFBhdGgpOwogICAgfQogIH0pOwp9Ci8qKg0KICog5LuO6Lev55Sx5o+Q5Y+W5Zu96ZmF5YyW5pWw5o2uDQogKiBAcGFyYW0gaTE4bg0KICogQHBhcmFtIHJvdXRlcw0KICovCgoKZnVuY3Rpb24gbWVyZ2VJMThuRnJvbVJvdXRlcyhpMThuLCByb3V0ZXMpIHsKICBmb3JtYXRGdWxsUGF0aChyb3V0ZXMpOwogIHZhciBDTiA9IGdlbmVyYXRlSTE4bihuZXcgT2JqZWN0KCksIHJvdXRlcywgJ25hbWUnKTsKICB2YXIgVVMgPSBnZW5lcmF0ZUkxOG4obmV3IE9iamVjdCgpLCByb3V0ZXMsICdwYXRoJyk7CiAgaTE4bi5tZXJnZUxvY2FsZU1lc3NhZ2UoJ0NOJywgQ04pOwogIGkxOG4ubWVyZ2VMb2NhbGVNZXNzYWdlKCdVUycsIFVTKTsKICB2YXIgbWVzc2FnZXMgPSByb3V0ZXNJMThuLm1lc3NhZ2VzOwogIE9iamVjdC5rZXlzKG1lc3NhZ2VzKS5mb3JFYWNoKGZ1bmN0aW9uIChsYW5nKSB7CiAgICBpMThuLm1lcmdlTG9jYWxlTWVzc2FnZShsYW5nLCBtZXNzYWdlc1tsYW5nXSk7CiAgfSk7Cn0KCmV4cG9ydCB7IGluaXRJMThuLCBtZXJnZUkxOG5Gcm9tUm91dGVzLCBmb3JtYXRGdWxsUGF0aCB9Ow=="},{"version":3,"sources":["D:/Project/spiderPlatform/spider_platform/src/utils/i18n.js"],"names":["Vue","VueI18n","routesI18n","getI18nKey","initI18n","locale","fallback","use","i18nOptions","fallbackLocale","silentFallbackWarn","generateI18n","lang","routes","valueKey","forEach","route","keys","fullPath","split","value","filter","item","startsWith","join","assignProps","children","formatFullPath","parentPath","isFullPath","path","substring","mergeI18nFromRoutes","i18n","CN","Object","US","mergeLocaleMessage","messages"],"mappings":"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","sourcesContent":["import Vue from 'vue'\r\nimport VueI18n from 'vue-i18n'\r\nimport routesI18n from '@/router/i18n'\r\nimport './Objects'\r\nimport {getI18nKey} from '@/utils/routerUtil'\r\n\r\n/**\r\n * 创建 i18n 配置\r\n * @param locale 本地化语言\r\n * @param fallback 回退语言\r\n * @returns {VueI18n}\r\n */\r\nfunction initI18n(locale, fallback) {\r\n  Vue.use(VueI18n)\r\n  let i18nOptions = {\r\n    locale,\r\n    fallbackLocale: fallback,\r\n    silentFallbackWarn: true,\r\n  }\r\n  return new VueI18n(i18nOptions)\r\n}\r\n\r\n/**\r\n * 根据 router options 配置生成 国际化语言\r\n * @param lang\r\n * @param routes\r\n * @param valueKey\r\n * @returns {*}\r\n */\r\nfunction generateI18n(lang, routes, valueKey) {\r\n  routes.forEach(route => {\r\n    let keys = getI18nKey(route.fullPath).split('.')\r\n    let value = valueKey === 'path' ? route[valueKey].split('/').filter(item => !item.startsWith(':') && item != '').join('.') : route[valueKey]\r\n    lang.assignProps(keys, value)\r\n    if (route.children) {\r\n      generateI18n(lang, route.children, valueKey)\r\n    }\r\n  })\r\n  return lang\r\n}\r\n\r\n/**\r\n * 格式化 router.options.routes，生成 fullPath\r\n * @param routes\r\n * @param parentPath\r\n */\r\nfunction formatFullPath(routes, parentPath = '') {\r\n  routes.forEach(route => {\r\n    let isFullPath = route.path.substring(0, 1) === '/'\r\n    route.fullPath = isFullPath ? route.path : (parentPath === '/' ? parentPath + route.path : parentPath + '/' + route.path)\r\n    if (route.children) {\r\n      formatFullPath(route.children, route.fullPath)\r\n    }\r\n  })\r\n}\r\n\r\n/**\r\n * 从路由提取国际化数据\r\n * @param i18n\r\n * @param routes\r\n */\r\nfunction mergeI18nFromRoutes(i18n, routes) {\r\n  formatFullPath(routes)\r\n  const CN = generateI18n(new Object(), routes, 'name')\r\n  const US = generateI18n(new Object(), routes, 'path')\r\n  i18n.mergeLocaleMessage('CN', CN)\r\n  i18n.mergeLocaleMessage('US', US)\r\n  const messages = routesI18n.messages\r\n  Object.keys(messages).forEach(lang => {\r\n    i18n.mergeLocaleMessage(lang, messages[lang])\r\n  })\r\n}\r\n\r\nexport {\r\n  initI18n,\r\n  mergeI18nFromRoutes,\r\n  formatFullPath\r\n}\r\n"]}]}