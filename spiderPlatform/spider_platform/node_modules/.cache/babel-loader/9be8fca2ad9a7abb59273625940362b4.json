{"remainingRequest":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Project\\spiderPlatform\\spider_platform\\src\\pages\\proj_manage\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Project\\spiderPlatform\\spider_platform\\src\\pages\\proj_manage\\index.vue","mtime":1657524339971},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646988157970},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1646988158074},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\babel-loader\\lib\\index.js","mtime":1646988157969},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646988157970},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\vue-loader\\lib\\index.js","mtime":1646988174758}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zcGxpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwiOwppbXBvcnQgX29iamVjdFNwcmVhZCBmcm9tICJEOi9Qcm9qZWN0L3NwaWRlclBsYXRmb3JtL3NwaWRlcl9wbGF0Zm9ybS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6L1Byb2plY3Qvc3BpZGVyUGxhdGZvcm0vc3BpZGVyX3BsYXRmb3JtL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgTUVUSE9ELCByZXF1ZXN0IH0gZnJvbSAnQC91dGlscy9yZXF1ZXN0JzsKaW1wb3J0IHsgQUREX0hPVF9TUElERVIsIEFERF9LRVlXT1JELCBDT05URU5UX1NQSURFUiwgR0VUX0FDQ09VTlRfSU5GTywgR0VUX0FMTF9DT05URU5UX1NQSURFUiwgR0VUX0NVU1RPTV9LRVlXT1JEUywgR0VUX0RFVklDRV9JTkZPLCBHRVRfSE9UX1NQSURFUiwgR0VUX1BST0pFQ1RTX0lORk8sIFBBVVNFX1RJTUlORywgUk1fSE9UX1NQSURFUiwgU1BJREVSX0RFTF9BREQsIFNQSURFUl9TVEFUVVMsIFNUQVJUX1RJTUlORywgVVBEQVRFX1BST19BQ0NPVU5ULCBVUERBVEVfUFJPSkVDVF9ERVZJQ0UsIFVQREFURV9USU1JTkdfSk9CLCBTUElERVJfTU9OSVRPUiwgQ1JFQVRFX1BST0osIERFTF9QUk9KLCBET1dOTE9BRF9VU0VSLCBET1dOTE9BRF9ORVdTLCBTRUNfTU9OSVRPUiB9IGZyb20gJ0Avc2VydmljZXMvYXBpJzsKaW1wb3J0ICogYXMgZWNoYXJ0cyBmcm9tICJlY2hhcnRzIjsgLy8gaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAncHJval9tYW5hZ2UnLAogIGkxOG46IHJlcXVpcmUoJy4vaTE4bicpLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkb3dubG9hZE5ld3NEYXRhU2VsZWN0OiAiIiwKICAgICAgZG93bmxvYWROZXdzRGF0YUxvYWRpbmc6IGZhbHNlLAogICAgICBkb3dubG9hZFVzZXJEYXRhTG9hZGluZzogZmFsc2UsCiAgICAgIGRvd25sb2FkVXNlckRhdGFWaXNpYmxlOiBmYWxzZSwKICAgICAgZG93bmxvYWROZXdzRGF0YVZpc2libGU6IGZhbHNlLAogICAgICBuYW1lRm9yUHJvamVjdDogJycsCiAgICAgIGRlc2NGb3JQcm9qZWN0OiAiIiwKICAgICAgYXV0aG9yRm9yUHJvamVjdDogJycsCiAgICAgIGFkZFNwaWRlcjogW10sCiAgICAgIGFkZFNwaWRlckxpc3Q6IFtdLAogICAgICBub3dQcm9qZWN0OiAnJywKICAgICAgZWRpdF9zcGlkZXJfaW5kZXg6IG51bGwsCiAgICAgIGVkaXRfc3BpZGVyX3JvdzogbnVsbCwKICAgICAgc3BpZGVyX2lzX3N0YXJ0OiB0cnVlLAogICAgICBhY3RpdmVOYW1lOiAnZmlyc3QnLAogICAgICBzcGlkZXJfcGFnZVNpemU6IDcsCiAgICAgIHNwaWRlcl9jdXJyZW50UGFnZTogMSwKICAgICAgc3BpZGVyX3RvdGFsOiA0LAogICAgICBzcGlkZXJfdGFibGVEYXRhOiBbXSwKICAgICAgc3BpZGVyX2NyZWF0ZURpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzcGlkZXJfZWRpdERpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhbGxIb3RTcGlkZXJzOiBbXSwKICAgICAgYWxsS2V5d29yZHNGb3JQcm9qZWN0OiBbXSwKICAgICAgbmV3SG90U3BpZGVyRm9yUHJvamVjdDogIiIsCiAgICAgIHByb2plY3RIb3RTcGlkZXJzOiBbXSwKICAgICAgaXNBZGRLZXl3b3JkQnRuVmlzaWJsZTogZmFsc2UsCiAgICAgIGlzQWRkSG90U3BpZGVyQnRuVmlzaWJsZTogZmFsc2UsCiAgICAgIG5ld1RpdGxlRm9yUHJvamVjdDogIiIsCiAgICAgIG5ld0tleXdvcmRGb3JQcm9qZWN0OiAiIiwKICAgICAgaXNBZGRUaW1lZFRhc2tCdG5WaXNpYmxlOiBmYWxzZSwKICAgICAgaXNBZGREaXN0RXF1aXBCdG5WaXNpYmxlOiBmYWxzZSwKICAgICAgaXNDcmVhdGVQcm9qZWN0QnRuVmlzaWJsZTogZmFsc2UsCiAgICAgIGlzQWRkUGxhdGZvcm1BY2NvdW50c0J0blZpc2libGU6IGZhbHNlLAogICAgICBhbGxQcm9qZWN0OiBbXSwKICAgICAgY3VycmVudFByb2plY3Q6IG51bGwsCiAgICAgIG5ld0Rpc3RFcXVpcElwOiAiIiwKICAgICAgYWxsRGlzdEVxdWlwOiBbXSwKICAgICAgZGlzdEVxdWlwc0Zyb1BvajogewogICAgICAgIHByb2plY3ROYW1lOiAiIiwKICAgICAgICBkaXN0RXF1aXBzOiBbXQogICAgICB9LAogICAgICB0aW1pbmdUYXNrOiB7fSwKICAgICAgYWxsU2NoZWR1bGVUYXNrOiBbXSwKICAgICAgcHJvamVjdEFjY291bnRzOiBbXSwKICAgICAgYWxsQWNjb3VudHM6IFtdLAogICAgICBuZXdQcm9qZWN0QWNjb3VudDogIiIsCiAgICAgIHNwaWRlclN0YXR1czogewogICAgICAgIHN0YXJ0VGltZTogIiIsCiAgICAgICAgZW5kVGltZTogIiIsCiAgICAgICAgY2xvc2VkUmVhc29uOiAiIgogICAgICB9LAogICAgICBlbW90aW9uRG9tOiBudWxsLAogICAgICBlbW90aW9uQ2hhcnQ6IG51bGwsCiAgICAgIGVtb3Rpb25PcHRpb246IG51bGwsCiAgICAgIGtleXdvcmRzRG9tOiBudWxsLAogICAgICBrZXl3b3Jkc0NoYXJ0OiBudWxsLAogICAgICBrZXl3b3Jkc09wdGlvbjogbnVsbAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGRvd25sb2FkTmV3c0RhdGE6IGZ1bmN0aW9uIGRvd25sb2FkTmV3c0RhdGEoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmRvd25sb2FkTmV3c0RhdGFMb2FkaW5nID0gdHJ1ZTsKICAgICAgcmVxdWVzdChET1dOTE9BRF9ORVdTLCBNRVRIT0QuUE9TVCwgewogICAgICAgIHByb2plY3RfbmFtZTogdGhpcy5kb3dubG9hZE5ld3NEYXRhU2VsZWN0CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7IC8vIGxldCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChkYXRhKQoKICAgICAgICB2YXIgYmluYXJ5RGF0YSA9IFtdOwogICAgICAgIGJpbmFyeURhdGEucHVzaChkYXRhKTsKICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoYmluYXJ5RGF0YSkpOwogICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgIGEuZG93bmxvYWQgPSAnbmV3c19yYXdkYXRhLmNzdic7CiAgICAgICAgYS5jbGljaygpOwogICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7CiAgICAgICAgX3RoaXMuZG93bmxvYWROZXdzRGF0YUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICBfdGhpcy5kb3dubG9hZE5ld3NEYXRhVmlzaWJsZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBkb3dubG9hZFVzZXJEYXRhOiBmdW5jdGlvbiBkb3dubG9hZFVzZXJEYXRhKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuZG93bmxvYWRVc2VyRGF0YUxvYWRpbmcgPSB0cnVlOwogICAgICByZXF1ZXN0KERPV05MT0FEX1VTRVIsIE1FVEhPRC5HRVQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIHZhciBkYXRhID0gcmVzLmRhdGE7IC8vIGxldCB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChkYXRhKQoKICAgICAgICB2YXIgYmluYXJ5RGF0YSA9IFtdOwogICAgICAgIGJpbmFyeURhdGEucHVzaChkYXRhKTsKICAgICAgICB2YXIgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoYmluYXJ5RGF0YSkpOwogICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7CiAgICAgICAgYS5ocmVmID0gdXJsOwogICAgICAgIGEuZG93bmxvYWQgPSAndXNlcnNfcmF3ZGF0YS5jc3YnOwogICAgICAgIGEuY2xpY2soKTsKICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOwogICAgICAgIF90aGlzMi5kb3dubG9hZFVzZXJEYXRhTG9hZGluZyA9IGZhbHNlOwogICAgICAgIF90aGlzMi5kb3dubG9hZFVzZXJEYXRhVmlzaWJsZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxQcm9qZWN0OiBmdW5jdGlvbiBkZWxQcm9qZWN0KGluZGV4LCByb3cpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbliKDpmaTor6Xku7vliqEsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgY2VudGVyOiB0cnVlCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJlcXVlc3QoREVMX1BST0osIE1FVEhPRC5QT1NULCB7CiAgICAgICAgICBwcm9qZWN0X25hbWU6IHJvdy5uYW1lCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJwogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIF90aGlzMy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnLAogICAgICAgICAgICAgIG1lc3NhZ2U6ICfliKDpmaTlpLHotKUnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzMy5xdWVyeVByb2plY3RzKCk7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+W3suWPlua2iOWIoOmZpCcKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgY29tcGxldGVEYXRlOiBmdW5jdGlvbiBjb21wbGV0ZURhdGUodmFsdWUpIHsKICAgICAgcmV0dXJuIHZhbHVlIDwgMTAgPyAiMCIgKyB2YWx1ZSA6IHZhbHVlOwogICAgfSwKICAgIGdldE5vd0Zvcm1hdERheTogZnVuY3Rpb24gZ2V0Tm93Rm9ybWF0RGF5KG5vd0RhdGUpIHsKICAgICAgdmFyIGNoYXIgPSAiLSI7CgogICAgICBpZiAobm93RGF0ZSA9PSBudWxsKSB7CiAgICAgICAgbm93RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICAgIH0KCiAgICAgIHZhciBkYXkgPSBub3dEYXRlLmdldERhdGUoKTsKICAgICAgdmFyIG1vbnRoID0gbm93RGF0ZS5nZXRNb250aCgpICsgMTsgLy/ms6jmhI/mnIjku73pnIDopoErMQoKICAgICAgdmFyIHllYXIgPSBub3dEYXRlLmdldEZ1bGxZZWFyKCk7IC8v6KGl5YWoMO+8jOW5tuaLvOaOpQoKICAgICAgcmV0dXJuIHllYXIgKyBjaGFyICsgdGhpcy5jb21wbGV0ZURhdGUobW9udGgpICsgY2hhciArIHRoaXMuY29tcGxldGVEYXRlKGRheSk7CiAgICB9LAogICAgZ2V0Tm93Rm9ybWF0VGltZTogZnVuY3Rpb24gZ2V0Tm93Rm9ybWF0VGltZSgpIHsKICAgICAgdmFyIG5vd0RhdGUgPSBuZXcgRGF0ZSgpOwogICAgICB2YXIgY29sb24gPSAiOiI7CiAgICAgIHZhciBoID0gbm93RGF0ZS5nZXRIb3VycygpOwogICAgICB2YXIgbSA9IG5vd0RhdGUuZ2V0TWludXRlcygpOwogICAgICB2YXIgcyA9IG5vd0RhdGUuZ2V0U2Vjb25kcygpOyAvL+ihpeWFqDDvvIzlubbmi7zmjqUKCiAgICAgIHJldHVybiB0aGlzLmdldE5vd0Zvcm1hdERheShub3dEYXRlKSArICIgIiArIHRoaXMuY29tcGxldGVEYXRlKGgpICsgY29sb24gKyB0aGlzLmNvbXBsZXRlRGF0ZShtKSArIGNvbG9uICsgdGhpcy5jb21wbGV0ZURhdGUocyk7CiAgICB9LAogICAgZ2V0TGFzdEZvcm1hdERheTogZnVuY3Rpb24gZ2V0TGFzdEZvcm1hdERheShub3dEYXRlKSB7CiAgICAgIHZhciBjaGFyID0gIi0iOwoKICAgICAgaWYgKG5vd0RhdGUgPT0gbnVsbCkgewogICAgICAgIG5vd0RhdGUgPSBuZXcgRGF0ZSgpOwogICAgICB9CgogICAgICB2YXIgZGF5ID0gbm93RGF0ZS5nZXREYXRlKCk7CiAgICAgIHZhciBtb250aCA9IG5vd0RhdGUuZ2V0TW9udGgoKSArIDE7IC8v5rOo5oSP5pyI5Lu96ZyA6KaBKzEKCiAgICAgIHZhciB5ZWFyID0gbm93RGF0ZS5nZXRGdWxsWWVhcigpOyAvL+ihpeWFqDDvvIzlubbmi7zmjqUKCiAgICAgIHJldHVybiB5ZWFyIC0gMSArIGNoYXIgKyB0aGlzLmNvbXBsZXRlRGF0ZShtb250aCkgKyBjaGFyICsgdGhpcy5jb21wbGV0ZURhdGUoZGF5KTsKICAgIH0sCiAgICBnZXRMYXN0Rm9ybWF0VGltZTogZnVuY3Rpb24gZ2V0TGFzdEZvcm1hdFRpbWUoKSB7CiAgICAgIHZhciBub3dEYXRlID0gbmV3IERhdGUoKTsKICAgICAgdmFyIGNvbG9uID0gIjoiOwogICAgICB2YXIgaCA9IG5vd0RhdGUuZ2V0SG91cnMoKTsKICAgICAgdmFyIG0gPSBub3dEYXRlLmdldE1pbnV0ZXMoKTsKICAgICAgdmFyIHMgPSBub3dEYXRlLmdldFNlY29uZHMoKTsgLy/ooaXlhagw77yM5bm25ou85o6lCgogICAgICByZXR1cm4gdGhpcy5nZXRMYXN0Rm9ybWF0RGF5KG5vd0RhdGUpICsgIiAiICsgdGhpcy5jb21wbGV0ZURhdGUoaCkgKyBjb2xvbiArIHRoaXMuY29tcGxldGVEYXRlKG0pICsgY29sb24gKyB0aGlzLmNvbXBsZXRlRGF0ZShzKTsKICAgIH0sCiAgICBjcmVhdGVOZXdQcm9qOiBmdW5jdGlvbiBjcmVhdGVOZXdQcm9qKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgcmVxdWVzdChDUkVBVEVfUFJPSiwgTUVUSE9ELlBPU1QsIHsKICAgICAgICBwYXJhbTogewogICAgICAgICAgImF1dGhvciI6IHRoYXQuYXV0aG9yRm9yUHJvamVjdCwKICAgICAgICAgICJjcmVhdGVfdGltZSI6IHRoYXQuZ2V0Tm93Rm9ybWF0VGltZSgpLAogICAgICAgICAgIm5hbWUiOiB0aGF0Lm5hbWVGb3JQcm9qZWN0LAogICAgICAgICAgImRlc2MiOiB0aGF0LmRlc2NGb3JQcm9qZWN0LAogICAgICAgICAgInNwaWRlcl9tYW5hZ2VyIjogewogICAgICAgICAgICAicHJvamVjdF9uYW1lIjogdGhhdC5uYW1lRm9yUHJvamVjdCwKICAgICAgICAgICAgInNwaWRlcnMiOiB7fQogICAgICAgICAgfSwKICAgICAgICAgICJob3Rfc3BpZGVyX2NvbmZpZyI6IHt9LAogICAgICAgICAgImRldmljZXNfbWFuYWdlciI6IHsKICAgICAgICAgICAgIjEyNy4wLjAuMSI6IHRydWUKICAgICAgICAgIH0sCiAgICAgICAgICAiY3Jhd2xfdGltZSI6IHsKICAgICAgICAgICAgInN0YXJ0IjogdGhhdC5nZXRMYXN0Rm9ybWF0VGltZSgpLAogICAgICAgICAgICAiZW5kIjogdGhhdC5nZXROb3dGb3JtYXRUaW1lKCkKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIF90aGlzNC4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfliJvlu7rku7vliqHmiJDlip8nLAogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzNC5xdWVyeVByb2plY3RzKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIF90aGlzNC4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfliJvlu7rku7vliqHlpLHotKUnLAogICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuaXNDcmVhdGVQcm9qZWN0QnRuVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIGdldENvbnRlbnRTcGlkZXI6IGZ1bmN0aW9uIGdldENvbnRlbnRTcGlkZXIoKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdGhpcy5zcGlkZXJfY3JlYXRlRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5hZGRTcGlkZXIgPSBbXTsKICAgICAgcmVxdWVzdChHRVRfQUxMX0NPTlRFTlRfU1BJREVSLCBNRVRIT0QuR0VULCB7fSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgdmFyIG5vd1NwaWRlciA9IFtdOwoKICAgICAgICBmb3IgKHZhciBpIGluIF90aGlzNS5zcGlkZXJfdGFibGVEYXRhKSB7CiAgICAgICAgICBub3dTcGlkZXIucHVzaChfdGhpczUuc3BpZGVyX3RhYmxlRGF0YVtpXVsnbmFtZSddKTsKICAgICAgICB9CgogICAgICAgIHZhciBzcGlkZXJPcHRpb25zID0gcmVzLmRhdGEuY29udGVudF9zcGlkZXJzLmZpbHRlcihmdW5jdGlvbiAodikgewogICAgICAgICAgcmV0dXJuICFub3dTcGlkZXIuaW5jbHVkZXModik7CiAgICAgICAgfSk7CiAgICAgICAgdGhhdC5hZGRTcGlkZXJMaXN0ID0gc3BpZGVyT3B0aW9uczsKICAgICAgfSk7CiAgICB9LAogICAgZ2V0SG90U3BpZGVyczogZnVuY3Rpb24gZ2V0SG90U3BpZGVycygpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICByZXF1ZXN0KEdFVF9IT1RfU1BJREVSLCBNRVRIT0QuR0VUKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGF0LmFsbEhvdFNwaWRlcnMgPSBbXTsKICAgICAgICAgIHRoYXQuYWxsSG90U3BpZGVycyA9IHJlcy5kYXRhLmhvdF9zcGlkZXJzOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0SG90U3BpZGVyc0ZvclByb2plY3Q6IGZ1bmN0aW9uIGdldEhvdFNwaWRlcnNGb3JQcm9qZWN0KHByb2plY3ROYW1lKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgcmVxdWVzdChHRVRfUFJPSkVDVFNfSU5GTywgTUVUSE9ELlBPU1QsIHsKICAgICAgICBwcm9qZWN0X25hbWU6IHByb2plY3ROYW1lCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHZhciBhbGxTcGlkZXJzID0gcmVzLmRhdGEubWVzc2FnZS5ob3Rfc3BpZGVyX2NvbmZpZzsKICAgICAgICAgIHRoYXQucHJvamVjdEhvdFNwaWRlcnMgPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gYWxsU3BpZGVycykgewogICAgICAgICAgICB0aGF0LnByb2plY3RIb3RTcGlkZXJzLnB1c2goewogICAgICAgICAgICAgICJwbGF0Zm9ybSI6IGtleSwKICAgICAgICAgICAgICAic3RhdHVzIjogYWxsU3BpZGVyc1trZXldCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0QWxsS2V5d29yZHNGb3JQcm9qZWN0OiBmdW5jdGlvbiBnZXRBbGxLZXl3b3Jkc0ZvclByb2plY3QoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIHByb2plY3RfbmFtZSA9IHRoYXQuY3VycmVudFByb2plY3QubmFtZTsKICAgICAgcmVxdWVzdChHRVRfQ1VTVE9NX0tFWVdPUkRTLCBNRVRIT0QuUE9TVCwgewogICAgICAgICJwcm9qZWN0X25hbWUiOiBwcm9qZWN0X25hbWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhhdC5hbGxLZXl3b3Jkc0ZvclByb2plY3QgPSBbXTsKICAgICAgICAgIHRoYXQuYWxsS2V5d29yZHNGb3JQcm9qZWN0ID0gcmVzLmRhdGEubWVzc2FnZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFkZEhvdFNwaWRlcjogZnVuY3Rpb24gYWRkSG90U3BpZGVyKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBwcm9qZWN0TmFtZSA9IHRoYXQuY3VycmVudFByb2plY3QubmFtZTsKICAgICAgcmVxdWVzdChBRERfSE9UX1NQSURFUiwgTUVUSE9ELlBPU1QsIHsKICAgICAgICAicHJvamVjdF9uYW1lIjogcHJvamVjdE5hbWUsCiAgICAgICAgImFkZF9zcGlkZXIiOiBbdGhhdC5uZXdIb3RTcGlkZXJGb3JQcm9qZWN0XQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGF0LmdldEhvdFNwaWRlcnNGb3JQcm9qZWN0KHRoYXQuY3VycmVudFByb2plY3QubmFtZSk7CiAgICAgICAgICB0aGF0LmlzQWRkSG90U3BpZGVyQnRuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVtb3ZlSG90U3BpZGVyOiBmdW5jdGlvbiByZW1vdmVIb3RTcGlkZXIoaG90U3BpZGVyKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIHByb2plY3ROYW1lID0gdGhhdC5jdXJyZW50UHJvamVjdC5uYW1lOwogICAgICByZXF1ZXN0KFJNX0hPVF9TUElERVIsIE1FVEhPRC5QT1NULCB7CiAgICAgICAgInByb2plY3RfbmFtZSI6IHByb2plY3ROYW1lLAogICAgICAgICJybV9zcGlkZXIiOiBbaG90U3BpZGVyXQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGF0LmdldEhvdFNwaWRlcnNGb3JQcm9qZWN0KHRoYXQuY3VycmVudFByb2plY3QubmFtZSk7CiAgICAgICAgICB0aGF0LmlzQWRkSG90U3BpZGVyQnRuVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWRkSG90U3BpZGVyS2V5d29yZDogZnVuY3Rpb24gYWRkSG90U3BpZGVyS2V5d29yZCgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB2YXIgcHJvamVjdF9uYW1lID0gdGhhdC5jdXJyZW50UHJvamVjdC5uYW1lOwogICAgICB2YXIgbmV3VGl0bGUgPSB0aGF0Lm5ld1RpdGxlRm9yUHJvamVjdDsKICAgICAgdmFyIGFsbEtleXdvcmRzID0gdGhhdC5uZXdLZXl3b3JkRm9yUHJvamVjdC5zcGxpdCgiXG4iKTsKICAgICAgcmVxdWVzdChBRERfS0VZV09SRCwgTUVUSE9ELlBPU1QsIHsKICAgICAgICAicHJvamVjdF9uYW1lIjogcHJvamVjdF9uYW1lLAogICAgICAgICJhZGRfa2V5d29yZHMiOiB7CiAgICAgICAgICAidGl0bGUiOiBuZXdUaXRsZSwKICAgICAgICAgICJrZXl3b3JkcyI6IGFsbEtleXdvcmRzCiAgICAgICAgfSwKICAgICAgICAicm1fa2V5d29yZHMiOiB7fQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGF0LmdldEFsbEtleXdvcmRzRm9yUHJvamVjdCgpOwogICAgICAgIHRoYXQuaXNBZGRLZXl3b3JkQnRuVmlzaWJsZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVLZXl3b3JkRm9yUHJvamVjdDogZnVuY3Rpb24gZGVsZXRlS2V5d29yZEZvclByb2plY3QoaW5kZXgsIHJvdykgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBwcm9qZWN0X25hbWUgPSB0aGF0LmN1cnJlbnRQcm9qZWN0Lm5hbWU7CiAgICAgIHZhciBrZXl3b3JkID0ge307CiAgICAgIGtleXdvcmRbInRpdGxlIl0gPSByb3cudGl0bGU7CiAgICAgIGtleXdvcmRbImtleXdvcmRzIl0gPSBbcm93LmtleXdvcmRdOwogICAgICByZXF1ZXN0KEFERF9LRVlXT1JELCBNRVRIT0QuUE9TVCwgewogICAgICAgICJwcm9qZWN0X25hbWUiOiBwcm9qZWN0X25hbWUsCiAgICAgICAgImFkZF9rZXl3b3JkcyI6IHt9LAogICAgICAgICJybV9rZXl3b3JkcyI6IGtleXdvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhhdC5nZXRBbGxLZXl3b3Jkc0ZvclByb2plY3QoKTsKICAgICAgICB0aGF0LmlzQWRkS2V5d29yZEJ0blZpc2libGUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgcXVlcnlQcm9qZWN0czogZnVuY3Rpb24gcXVlcnlQcm9qZWN0cygpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICByZXF1ZXN0KEdFVF9QUk9KRUNUU19JTkZPLCBNRVRIT0QuUE9TVCwgewogICAgICAgIHByb2plY3RfbmFtZTogIiIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhhdC5hbGxQcm9qZWN0ID0gcmVzLmRhdGEubWVzc2FnZS5wcm9qZWN0czsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG1hbmFnZUNvbnRlbnRTcGlkZXI6IGZ1bmN0aW9uIG1hbmFnZUNvbnRlbnRTcGlkZXIoaW5kZXgsIHJvdykgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuYWN0aXZlTmFtZSA9ICJzZWNvbmQiOwogICAgICB0aGlzLmdldEFsbENvbnRlbnRTcGlkZXIocm93Lm5hbWUpOwogICAgICB0aGlzLm5vd1Byb2plY3QgPSByb3cubmFtZTsKICAgIH0sCiAgICBnZXRBbGxDb250ZW50U3BpZGVyOiBmdW5jdGlvbiBnZXRBbGxDb250ZW50U3BpZGVyKHByb2plY3ROYW1lKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0KENPTlRFTlRfU1BJREVSLCBNRVRIT0QuUE9TVCwgewogICAgICAgICAgICAgICAgICBwcm9qZWN0X25hbWU6IHByb2plY3ROYW1lCiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgdmFyIG5ld0RhdGEgPSBbXTsKCiAgICAgICAgICAgICAgICAgIGZvciAodmFyIGRldmljZSBpbiByZXMuZGF0YS5jb250ZW50KSB7CiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgc3BpZGVyIGluIHJlcy5kYXRhLmNvbnRlbnRbZGV2aWNlXSkgewogICAgICAgICAgICAgICAgICAgICAgbmV3RGF0YS5wdXNoKHsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogcmVzLmRhdGEuY29udGVudFtkZXZpY2VdW3NwaWRlcl1bJ3N0YXJ0X3RpbWUnXSwKICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc3BpZGVyLAogICAgICAgICAgICAgICAgICAgICAgICBuX25hbWU6IHNwaWRlciwKICAgICAgICAgICAgICAgICAgICAgICAgdGFnOiByZXMuZGF0YS5jb250ZW50W2RldmljZV1bc3BpZGVyXVsnbGFiZWwnXSA9PT0gdHJ1ZSA/ICflt7LlkK/nlKgnIDogJ+W3suemgeeUqCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGRldmljZTogZGV2aWNlLAogICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IHJlcy5kYXRhLmNvbnRlbnRbZGV2aWNlXVtzcGlkZXJdWydzdGF0dXMnXQogICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBfdGhpczYuc3BpZGVyX3RhYmxlRGF0YSA9IG5ld0RhdGE7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIG1hbmFnZUhvdFNwaWRlcjogZnVuY3Rpb24gbWFuYWdlSG90U3BpZGVyKGluZGV4KSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5hY3RpdmVOYW1lID0gInRoaXJkIjsKICAgICAgdGhhdC5jdXJyZW50UHJvamVjdCA9IHRoYXQuYWxsUHJvamVjdFtpbmRleF07CiAgICAgIHZhciBhbGxTcGlkZXJzID0gdGhhdC5jdXJyZW50UHJvamVjdC5ob3Rfc3BpZGVyX2NvbmZpZzsKICAgICAgdGhhdC5wcm9qZWN0SG90U3BpZGVycyA9IFtdOwoKICAgICAgZm9yICh2YXIga2V5IGluIGFsbFNwaWRlcnMpIHsKICAgICAgICB0aGF0LnByb2plY3RIb3RTcGlkZXJzLnB1c2goewogICAgICAgICAgInBsYXRmb3JtIjoga2V5LAogICAgICAgICAgInN0YXR1cyI6IGFsbFNwaWRlcnNba2V5XQogICAgICAgIH0pOwogICAgICB9CgogICAgICB0aGF0LmdldEhvdFNwaWRlcnMoKTsKICAgICAgdGhhdC5nZXRBbGxLZXl3b3Jkc0ZvclByb2plY3QoKTsKICAgIH0sCiAgICBtYW5hZ2VEaXN0RXF1aXA6IGZ1bmN0aW9uIG1hbmFnZURpc3RFcXVpcChpbmRleCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoYXQuYWN0aXZlTmFtZSA9ICJmaWZ0aCI7CiAgICAgIHRoYXQuY3VycmVudFByb2plY3QgPSB0aGF0LmFsbFByb2plY3RbaW5kZXhdOwogICAgICByZXF1ZXN0KEdFVF9ERVZJQ0VfSU5GTywgTUVUSE9ELlBPU1QsIHsKICAgICAgICBwcm9qZWN0X25hbWU6IHRoYXQuY3VycmVudFByb2plY3QubmFtZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGF0LmRpc3RFcXVpcHNGcm9Qb2ouZGlzdEVxdWlwcyA9IFtdOwoKICAgICAgICAgIGZvciAodmFyIGtleSBpbiByZXMuZGF0YS5tZXNzYWdlKSB7CiAgICAgICAgICAgIHRoYXQuZGlzdEVxdWlwc0Zyb1Bvai5kaXN0RXF1aXBzLnB1c2gocmVzLmRhdGEubWVzc2FnZVtrZXldKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXF1ZXN0KEdFVF9ERVZJQ0VfSU5GTywgTUVUSE9ELlBPU1QsIHsKICAgICAgICBwcm9qZWN0X25hbWU6ICIiCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHZhciBkaXN0RXF1aXBzID0gcmVzLmRhdGEubWVzc2FnZTsKICAgICAgICAgIHRoYXQuYWxsRGlzdEVxdWlwID0gW107CgogICAgICAgICAgZm9yICh2YXIga2V5IGluIGRpc3RFcXVpcHMpIHsKICAgICAgICAgICAgdGhhdC5hbGxEaXN0RXF1aXAucHVzaChkaXN0RXF1aXBzW2tleV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgbWFuYWdlUGxhdEFjY291bnQ6IGZ1bmN0aW9uIG1hbmFnZVBsYXRBY2NvdW50KGluZGV4KSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5hY3RpdmVOYW1lID0gInNpeHRoIjsKICAgICAgdGhhdC5jdXJyZW50UHJvamVjdCA9IHRoYXQuYWxsUHJvamVjdFtpbmRleF07CiAgICAgIHRoYXQucXVlcnlQcm9qZWN0QWNjb3VudCgpOwogICAgfSwKICAgIG1vbml0b3JTZWN1cml0eVNpdHVhdGlvbjogZnVuY3Rpb24gbW9uaXRvclNlY3VyaXR5U2l0dWF0aW9uKGluZGV4KSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5hY3RpdmVOYW1lID0gImVpZ2h0aCI7CiAgICAgIHRoYXQuY3VycmVudFByb2plY3QgPSB0aGF0LmFsbFByb2plY3RbaW5kZXhdOwogICAgICB0aGlzLmVtb3Rpb25Eb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW1vdGlvbicpOwogICAgICB0aGlzLmVtb3Rpb25DaGFydCA9IGVjaGFydHMuaW5pdCh0aGlzLmVtb3Rpb25Eb20pOwogICAgICB0aGlzLmtleXdvcmRzRG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2tleXdvcmRzJyk7CiAgICAgIHRoaXMua2V5d29yZHNDaGFydCA9IGVjaGFydHMuaW5pdCh0aGlzLmtleXdvcmRzRG9tKTsKICAgICAgdGhpcy5lbW90aW9uT3B0aW9uID0gewogICAgICAgIHRpdGxlOiB7CiAgICAgICAgICB0ZXh0OiAn5oOF5oSf6LWw5Yq/JwogICAgICAgIH0sCiAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnCiAgICAgICAgfSwKICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgIGRhdGE6IFtdCiAgICAgICAgfSwKICAgICAgICBncmlkOiB7CiAgICAgICAgICBsZWZ0OiAnMyUnLAogICAgICAgICAgcmlnaHQ6ICc0JScsCiAgICAgICAgICBib3R0b206ICczJScsCiAgICAgICAgICBjb250YWluTGFiZWw6IHRydWUKICAgICAgICB9LAogICAgICAgIHRvb2xib3g6IHsKICAgICAgICAgIGZlYXR1cmU6IHsKICAgICAgICAgICAgc2F2ZUFzSW1hZ2U6IHt9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB4QXhpczogewogICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgIGJvdW5kYXJ5R2FwOiB0cnVlLAogICAgICAgICAgZGF0YTogW10KICAgICAgICB9LAogICAgICAgIHlBeGlzOiB7CiAgICAgICAgICB0eXBlOiAndmFsdWUnCiAgICAgICAgfSwKICAgICAgICBzZXJpZXM6IFtdCiAgICAgIH07CiAgICAgIHRoaXMuZW1vdGlvbk9wdGlvbiAmJiB0aGlzLmVtb3Rpb25DaGFydC5zZXRPcHRpb24odGhpcy5lbW90aW9uT3B0aW9uKTsKICAgICAgdGhpcy5rZXl3b3Jkc09wdGlvbiA9IHsKICAgICAgICB0aXRsZTogewogICAgICAgICAgdGV4dDogJ+WFs+mUruivjei1sOWKvycKICAgICAgICB9LAogICAgICAgIHRvb2x0aXA6IHsKICAgICAgICAgIHRyaWdnZXI6ICdheGlzJwogICAgICAgIH0sCiAgICAgICAgbGVnZW5kOiB7CiAgICAgICAgICBkYXRhOiBbXQogICAgICAgIH0sCiAgICAgICAgZ3JpZDogewogICAgICAgICAgbGVmdDogJzMlJywKICAgICAgICAgIHJpZ2h0OiAnNCUnLAogICAgICAgICAgYm90dG9tOiAnMyUnLAogICAgICAgICAgY29udGFpbkxhYmVsOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB0b29sYm94OiB7CiAgICAgICAgICBmZWF0dXJlOiB7CiAgICAgICAgICAgIHNhdmVBc0ltYWdlOiB7fQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgeEF4aXM6IHsKICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICBib3VuZGFyeUdhcDogdHJ1ZSwKICAgICAgICAgIGRhdGE6IFtdCiAgICAgICAgfSwKICAgICAgICB5QXhpczogewogICAgICAgICAgdHlwZTogJ3ZhbHVlJwogICAgICAgIH0sCiAgICAgICAgc2VyaWVzOiBbXQogICAgICB9OwogICAgICB0aGlzLmtleXdvcmRzT3B0aW9uICYmIHRoaXMua2V5d29yZHNDaGFydC5zZXRPcHRpb24odGhpcy5rZXl3b3Jkc09wdGlvbik7CiAgICAgIHJlcXVlc3QoU0VDX01PTklUT1IsIE1FVEhPRC5QT1NULCB7CiAgICAgICAgInByb2plY3RfbmFtZSI6IHRoYXQuY3VycmVudFByb2plY3QubmFtZSwKICAgICAgICAibW9kZSI6ICJkYXkiCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICB2YXIgZW1vdGlvbkRhdGEgPSBbXTsKICAgICAgICB2YXIgZW1vdGlvbkxlZ2VuZCA9IFtdOwogICAgICAgIHZhciBlbW90aW9ucyA9IGRhdGEuZGF0YS5kYXRhWyJlbW90aW9uIl07CgogICAgICAgIGZvciAodmFyIGtleSBpbiBlbW90aW9ucykgewogICAgICAgICAgdmFyIGVtbyA9IHZvaWQgMDsKCiAgICAgICAgICBpZiAoIm5lZyIgPT09IGtleSkgewogICAgICAgICAgICBlbW8gPSAi5raI5p6BIjsKICAgICAgICAgIH0gZWxzZSBpZiAoInBvcyIgPT09IGtleSkgewogICAgICAgICAgICBlbW8gPSAi56ev5p6BIjsKICAgICAgICAgIH0KCiAgICAgICAgICBlbW90aW9uTGVnZW5kLnB1c2goZW1vKTsKICAgICAgICAgIGVtb3Rpb25EYXRhLnB1c2goewogICAgICAgICAgICBuYW1lOiBlbW8sCiAgICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgICAgc3RhY2s6IGVtbywKICAgICAgICAgICAgc21vb3RoOiB0cnVlLAogICAgICAgICAgICBkYXRhOiBlbW90aW9uc1trZXldCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHRoYXQuZW1vdGlvbk9wdGlvbi5sZWdlbmQuZGF0YSA9IGVtb3Rpb25MZWdlbmQ7CiAgICAgICAgdGhhdC5lbW90aW9uT3B0aW9uLnNlcmllcyA9IGVtb3Rpb25EYXRhOwogICAgICAgIHZhciBrZXl3b3JkRGF0YSA9IFtdOwogICAgICAgIHZhciBrZXl3b3JkTGVnZW5kID0gW107CiAgICAgICAgdmFyIGtleXdvcmRzID0gZGF0YS5kYXRhLmRhdGFbImtleXdvcmRzIl07CgogICAgICAgIGZvciAodmFyIF9rZXkgaW4ga2V5d29yZHMpIHsKICAgICAgICAgIGtleXdvcmRMZWdlbmQucHVzaChfa2V5KTsKICAgICAgICAgIGtleXdvcmREYXRhLnB1c2goewogICAgICAgICAgICBuYW1lOiBfa2V5LAogICAgICAgICAgICB0eXBlOiAnbGluZScsCiAgICAgICAgICAgIHN0YWNrOiBfa2V5LAogICAgICAgICAgICBzbW9vdGg6IHRydWUsCiAgICAgICAgICAgIGRhdGE6IGtleXdvcmRzW19rZXldCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHRoYXQua2V5d29yZHNPcHRpb24ubGVnZW5kLmRhdGEgPSBrZXl3b3JkTGVnZW5kOwogICAgICAgIHRoYXQua2V5d29yZHNPcHRpb24uc2VyaWVzID0ga2V5d29yZERhdGE7CiAgICAgICAgdGhhdC5lbW90aW9uT3B0aW9uLnhBeGlzLmRhdGEgPSBkYXRhLmRhdGEuZGF0YVsieCJdOwogICAgICAgIHRoYXQua2V5d29yZHNPcHRpb24ueEF4aXMuZGF0YSA9IGRhdGEuZGF0YS5kYXRhWyJ4Il07CiAgICAgICAgdGhhdC5lbW90aW9uT3B0aW9uICYmIHRoYXQuZW1vdGlvbkNoYXJ0LnNldE9wdGlvbih0aGF0LmVtb3Rpb25PcHRpb24pOwogICAgICAgIHRoYXQua2V5d29yZHNPcHRpb24gJiYgdGhhdC5rZXl3b3Jkc0NoYXJ0LnNldE9wdGlvbih0aGF0LmtleXdvcmRzT3B0aW9uKTsKICAgICAgfSk7CiAgICB9LAogICAgcmVsb2FkUHJvamVjdERldmljZTogZnVuY3Rpb24gcmVsb2FkUHJvamVjdERldmljZSgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICByZXF1ZXN0KEdFVF9ERVZJQ0VfSU5GTywgTUVUSE9ELlBPU1QsIHsKICAgICAgICBwcm9qZWN0X25hbWU6IHRoYXQuY3VycmVudFByb2plY3QubmFtZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICB0aGF0LmRpc3RFcXVpcHNGcm9Qb2ouZGlzdEVxdWlwcyA9IFtdOwoKICAgICAgICAgIGZvciAodmFyIGtleSBpbiByZXMuZGF0YS5tZXNzYWdlKSB7CiAgICAgICAgICAgIHRoYXQuZGlzdEVxdWlwc0Zyb1Bvai5kaXN0RXF1aXBzLnB1c2gocmVzLmRhdGEubWVzc2FnZVtrZXldKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGFkZFByb2plY3REZXZpY2U6IGZ1bmN0aW9uIGFkZFByb2plY3REZXZpY2UoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgcmVxdWVzdChVUERBVEVfUFJPSkVDVF9ERVZJQ0UsIE1FVEhPRC5QT1NULCB7CiAgICAgICAgInByb2plY3RfbmFtZSI6IHRoYXQuY3VycmVudFByb2plY3QubmFtZSwKICAgICAgICAiYWRkX2lwIjogW3RoYXQubmV3RGlzdEVxdWlwSXBdLAogICAgICAgICJybV9pcCI6IFtdCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoYXQucmVsb2FkUHJvamVjdERldmljZSgpOwogICAgICAgICAgdGhhdC5pc0FkZERpc3RFcXVpcEJ0blZpc2libGUgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHJlbW92ZVByb2plY3REZXZpY2U6IGZ1bmN0aW9uIHJlbW92ZVByb2plY3REZXZpY2UoZGlzdEVxdWlwSXBUb1JlbW92ZSwgZGlzdEVxdWlwUG9ydFRvUmVtb3ZlKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIGlwMnBvcnQgPSBkaXN0RXF1aXBJcFRvUmVtb3ZlICsgIjoiICsgZGlzdEVxdWlwUG9ydFRvUmVtb3ZlOwogICAgICByZXF1ZXN0KFVQREFURV9QUk9KRUNUX0RFVklDRSwgTUVUSE9ELlBPU1QsIHsKICAgICAgICAicHJvamVjdF9uYW1lIjogdGhhdC5jdXJyZW50UHJvamVjdC5uYW1lLAogICAgICAgICJhZGRfaXAiOiBbXSwKICAgICAgICAicm1faXAiOiBbaXAycG9ydF0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhhdC5yZWxvYWRQcm9qZWN0RGV2aWNlKCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVUaW1pbmdUYXNrOiBmdW5jdGlvbiB1cGRhdGVUaW1pbmdUYXNrKCkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBhX25hbWUgPSB0aGF0LnRpbWluZ1Rhc2submFtZTsKICAgICAgdmFyIGFfb2JqID0ge307CiAgICAgIGFfb2JqWyJ0aW1pbmdfam9iIl0gPSB7fTsKCiAgICAgIGlmICh0aGF0LnRpbWluZ1Rhc2sudHJpZ2dlciA9PT0gImludGVydmFsIikgewogICAgICAgIHRoYXQudGltaW5nVGFzay5rd2FyZ3MuZGF5ID0gTnVtYmVyKHRoYXQudGltaW5nVGFzay5rd2FyZ3MuZGF5KTsKICAgICAgICB0aGF0LnRpbWluZ1Rhc2sua3dhcmdzLmhvdXIgPSBOdW1iZXIodGhhdC50aW1pbmdUYXNrLmt3YXJncy5ob3VyKTsKICAgICAgICB0aGF0LnRpbWluZ1Rhc2sua3dhcmdzLm1pbnV0ZSA9IE51bWJlcih0aGF0LnRpbWluZ1Rhc2sua3dhcmdzLm1pbnV0ZSk7CiAgICAgICAgdGhhdC50aW1pbmdUYXNrLmt3YXJncy5zZWNvbmQgPSBOdW1iZXIodGhhdC50aW1pbmdUYXNrLmt3YXJncy5zZWNvbmQpOwogICAgICB9CgogICAgICBhX29ialsidGltaW5nX2pvYiJdW2FfbmFtZV0gPSB0aGF0LnRpbWluZ1Rhc2s7CiAgICAgIHJlcXVlc3QoVVBEQVRFX1RJTUlOR19KT0IsIE1FVEhPRC5QT1NULCBhX29iaikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhhdC5xdWVyeUFsbFNjaGVkdWxlVGFzaygpOwogICAgICAgIHRoYXQuaXNBZGRUaW1lZFRhc2tCdG5WaXNpYmxlID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIHNwaWRlcl9maWx0ZXJUYWc6IGZ1bmN0aW9uIHNwaWRlcl9maWx0ZXJUYWcodmFsdWUsIHJvdykgewogICAgICByZXR1cm4gcm93LnRhZyA9PT0gdmFsdWU7CiAgICB9LAogICAgc3BpZGVyX2hhbmRsZUNsaWNrOiBmdW5jdGlvbiBzcGlkZXJfaGFuZGxlQ2xpY2sodGFiKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKCiAgICAgIGlmICh0YWIuaW5kZXggPT09ICIzIikgewogICAgICAgIHRoYXQucXVlcnlBbGxTY2hlZHVsZVRhc2soKTsKICAgICAgfSBlbHNlIGlmICh0YWIuaW5kZXggPT09ICI1IikgewogICAgICAgIHRoYXQucXVlcnlQcm9qZWN0QWNjb3VudCgpOwogICAgICB9IGVsc2UgaWYgKHRhYi5pbmRleCA9PT0gIjIiKSB7CiAgICAgICAgdGhhdC5nZXRIb3RTcGlkZXJzKCk7CiAgICAgICAgdGhhdC5hY3RpdmVOYW1lID0gInRoaXJkIjsKICAgICAgfQogICAgfSwKICAgIHF1ZXJ5QWxsU2NoZWR1bGVUYXNrOiBmdW5jdGlvbiBxdWVyeUFsbFNjaGVkdWxlVGFzaygpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICByZXF1ZXN0KEdFVF9QUk9KRUNUU19JTkZPLCBNRVRIT0QuUE9TVCwgewogICAgICAgIHByb2plY3RfbmFtZTogIiIKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdmFyIGpvYk1hbmFnZXIgPSByZXMuZGF0YS5tZXNzYWdlLmpvYl9tYW5hZ2VyOwogICAgICAgICAgdGhhdC5hbGxTY2hlZHVsZVRhc2sgPSBbXTsKCiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gam9iTWFuYWdlcikgewogICAgICAgICAgICB0aGF0LmFsbFNjaGVkdWxlVGFzay5wdXNoKGpvYk1hbmFnZXJba2V5XSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBzcGlkZXJfaGFuZGxlRGVsZXRlOiBmdW5jdGlvbiBzcGlkZXJfaGFuZGxlRGVsZXRlKGluZGV4LCByb3cpIHsKICAgICAgdmFyIF90aGlzNyA9IHRoaXM7CgogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuWIoOmZpOivpeeIrOiZqywg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICBjZW50ZXI6IHRydWUKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVxdWVzdChTUElERVJfREVMX0FERCwgTUVUSE9ELlBPU1QsIHsKICAgICAgICAgICJwcm9qZWN0X25hbWUiOiB0aGF0Lm5vd1Byb2plY3QsCiAgICAgICAgICAiYWRkX3NwaWRlcnMiOiBbXSwKICAgICAgICAgICJybV9zcGlkZXJzIjogcm93Lm5fbmFtZQogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMzAwKSB7CiAgICAgICAgICAgIF90aGlzNy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgbWVzc2FnZTogJ+S4jeWtmOWcqOivpeeIrOiZq+S7u+WKoScsCiAgICAgICAgICAgICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX3RoaXM3LiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk54is6Jmr5oiQ5YqfJywKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpczcuc3BpZGVyX3RhYmxlRGF0YS5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXM3LiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHNwaWRlcl9oYW5kbGVfdXNlcl9DdXJyZW50Q2hhbmdlOiBmdW5jdGlvbiBzcGlkZXJfaGFuZGxlX3VzZXJfQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHZhbDsKICAgIH0sCiAgICBjcmVhdGVTcGlkZXI6IGZ1bmN0aW9uIGNyZWF0ZVNwaWRlcigpIHsKICAgICAgdmFyIF90aGlzOCA9IHRoaXM7CgogICAgICAvL+WcqOi/memHjOivt+axguacjeWKoeWZqOiOt+WPluWIsOWPr+S7pea3u+WKoOeahOeIrOiZq++8jOW5tuS4lOWvueavlOatpOS7u+WKoeW3suacieeahOeIrOiZq+abtOaWsG9wdGlvbnMKICAgICAgLy/or7fmsYLmnI3liqHlmajmlrDlu7rniKzomasKICAgICAgaWYgKHRoaXMuYWRkU3BpZGVyLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn5pyq6YCJ5oup54is6JmrJywKICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJlcXVlc3QoU1BJREVSX0RFTF9BREQsIE1FVEhPRC5QT1NULCB7CiAgICAgICAgICAicHJvamVjdF9uYW1lIjogdGhpcy5ub3dQcm9qZWN0LAogICAgICAgICAgImFkZF9zcGlkZXJzIjogdGhpcy5hZGRTcGlkZXIsCiAgICAgICAgICAicm1fc3BpZGVycyI6ICIiCiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAzMDApIHsKICAgICAgICAgICAgX3RoaXM4LiRtZXNzYWdlKHsKICAgICAgICAgICAgICBtZXNzYWdlOiAn5LiN5a2Y5Zyo6K+l54is6Jmr5Lu75YqhJywKICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBfdGhpczguJG1lc3NhZ2UoewogICAgICAgICAgICAgIG1lc3NhZ2U6ICfmt7vliqDmiJDlip8nLAogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF90aGlzOC5nZXRBbGxDb250ZW50U3BpZGVyKF90aGlzOC5ub3dQcm9qZWN0KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGhpcy5zcGlkZXJfY3JlYXRlRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgfSwKICAgIHNwaWRlcl9lZGl0OiBmdW5jdGlvbiBzcGlkZXJfZWRpdChpbmRleCwgcm93KSB7CiAgICAgIHRoaXMuc3BpZGVyX2VkaXREaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5zcGlkZXJfaXNfc3RhcnQgPSByb3cudGFnID09ICflt7LlkK/nlKgnID8gdHJ1ZSA6IGZhbHNlOwogICAgICB0aGlzLmVkaXRfc3BpZGVyX2luZGV4ID0gaW5kZXg7CiAgICAgIHRoaXMuZWRpdF9zcGlkZXJfcm93ID0gcm93OyAvLyDmoLnmja7ljp/lp4vmlbDmja7mm7TmlrDmjInpkq4KICAgIH0sCiAgICBlZGl0U3BpZGVyOiBmdW5jdGlvbiBlZGl0U3BpZGVyKCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKCiAgICAgIHZhciBzdGF0dXMgPSB0aGlzLmVkaXRfc3BpZGVyX3Jvdy50YWcgPT0gJ+W3suWQr+eUqCcgPyBmYWxzZSA6IHRydWU7CiAgICAgIHZhciBuYW1lID0gdGhpcy5lZGl0X3NwaWRlcl9yb3cubl9uYW1lOwogICAgICB2YXIgc3BpZGVyX3N0YXR1cyA9IHt9OwogICAgICBzcGlkZXJfc3RhdHVzW25hbWVdID0gc3RhdHVzOwogICAgICByZXF1ZXN0KFNQSURFUl9TVEFUVVMsIE1FVEhPRC5QT1NULCB7CiAgICAgICAgcHJvamVjdF9uYW1lOiB0aGlzLm5vd1Byb2plY3QsCiAgICAgICAgc3BpZGVyX3N0YXR1czogc3BpZGVyX3N0YXR1cwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAzMDApIHsKICAgICAgICAgIF90aGlzOS4kbWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICfkuI3lrZjlnKjor6XniKzomavku7vliqEnLAogICAgICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczkuJG1lc3NhZ2UoewogICAgICAgICAgICBtZXNzYWdlOiAn57yW6L6R54is6Jmr5oiQ5YqfJywKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpczkuc3BpZGVyX3RhYmxlRGF0YVtfdGhpczkuZWRpdF9zcGlkZXJfaW5kZXhdLnRhZyA9IF90aGlzOS5zcGlkZXJfaXNfc3RhcnQgPyAi5bey5ZCv55SoIiA6ICLlt7LlgZznlKgiOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuc3BpZGVyX2VkaXREaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgbW9uaXRvclNwaWRlcjogZnVuY3Rpb24gbW9uaXRvclNwaWRlcihpbmRleCwgcm93KSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdGhhdC5hY3RpdmVOYW1lID0gInNldmVudGgiOwogICAgICByZXF1ZXN0KFNQSURFUl9NT05JVE9SLCBNRVRIT0QuUE9TVCwgewogICAgICAgICJwcm9qZWN0X25hbWUiOiB0aGF0Lm5vd1Byb2plY3QsCiAgICAgICAgInBsYXRmb3JtIjogcm93Lm5fbmFtZQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKGUuZGF0YS5jb2RlID09PSAyMDApIHRoYXQucGFyc2VTcGlkZXJTdGF0dXMoZS5kYXRhLmRhdGEpOwogICAgICB9KTsKICAgIH0sCiAgICBwYXJzZVNwaWRlclN0YXR1czogZnVuY3Rpb24gcGFyc2VTcGlkZXJTdGF0dXMob3JpZ2luRGF0YSkgewogICAgICB0aGlzLnNwaWRlclN0YXR1cy5zdGFydFRpbWUgPSBvcmlnaW5EYXRhLnN0YXJ0X3RpbWU7CiAgICAgIHRoaXMuc3BpZGVyU3RhdHVzLmVuZFRpbWUgPSBvcmlnaW5EYXRhLmVuZF90aW1lOwogICAgICB0aGlzLnNwaWRlclN0YXR1cy5jbG9zZWRSZWFzb24gPSBvcmlnaW5EYXRhLmNsb3NlZF9yZWFzb247CiAgICAgIHZhciBkYXRhVm9sdW1lQ2hhcnREb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZGF0YVZvbHVtZScpOwogICAgICB2YXIgZGF0YVZvbHVtZUNoYXJ0ID0gZWNoYXJ0cy5pbml0KGRhdGFWb2x1bWVDaGFydERvbSk7CiAgICAgIHZhciBkYXRhVm9sdW1lQ2hhcnRPcHRpb24gPSB7CiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIHRleHQ6ICLmlbDmja7ph48iCiAgICAgICAgfSwKICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICB0cmlnZ2VyOiAnYXhpcycKICAgICAgICB9LAogICAgICAgIGxlZ2VuZDogewogICAgICAgICAgZGF0YTogWyfmlbDmja7ph48nXQogICAgICAgIH0sCiAgICAgICAgZ3JpZDogewogICAgICAgICAgbGVmdDogJzMlJywKICAgICAgICAgIHJpZ2h0OiAnNCUnLAogICAgICAgICAgYm90dG9tOiAnMyUnLAogICAgICAgICAgY29udGFpbkxhYmVsOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB4QXhpczogewogICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgIGJvdW5kYXJ5R2FwOiBmYWxzZSwKICAgICAgICAgIGRhdGE6IG9yaWdpbkRhdGEueAogICAgICAgIH0sCiAgICAgICAgeUF4aXM6IHsKICAgICAgICAgIHR5cGU6ICd2YWx1ZScKICAgICAgICB9LAogICAgICAgIHNlcmllczogW3sKICAgICAgICAgIG5hbWU6ICfmlbDmja7ph48nLAogICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgc3RhY2s6ICdUb3RhbCcsCiAgICAgICAgICBkYXRhOiBvcmlnaW5EYXRhWyLmlbDmja7ph48iXSwKICAgICAgICAgIHNtb290aDogdHJ1ZQogICAgICAgIH1dCiAgICAgIH07CiAgICAgIGRhdGFWb2x1bWVDaGFydE9wdGlvbiAmJiBkYXRhVm9sdW1lQ2hhcnQuc2V0T3B0aW9uKGRhdGFWb2x1bWVDaGFydE9wdGlvbik7CiAgICAgIHZhciByZXFSZXNwVm9sdW1lQ2hhcnREb20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVxUmVzcFZvbHVtZScpOwogICAgICB2YXIgcmVxUmVzcFZvbHVtZUNoYXJ0ID0gZWNoYXJ0cy5pbml0KHJlcVJlc3BWb2x1bWVDaGFydERvbSk7CiAgICAgIHZhciByZXFSZXNwVm9sdW1lQ2hhcnRPcHRpb24gPSB7CiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIHRleHQ6ICLor7fmsYLlkozlk43lupTph48iCiAgICAgICAgfSwKICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICB0cmlnZ2VyOiAnYXhpcycKICAgICAgICB9LAogICAgICAgIGxlZ2VuZDogewogICAgICAgICAgZGF0YTogWyfor7fmsYLph48nLCAn5ZON5bqU6YePJ10KICAgICAgICB9LAogICAgICAgIGdyaWQ6IHsKICAgICAgICAgIGxlZnQ6ICczJScsCiAgICAgICAgICByaWdodDogJzQlJywKICAgICAgICAgIGJvdHRvbTogJzMlJywKICAgICAgICAgIGNvbnRhaW5MYWJlbDogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgeEF4aXM6IHsKICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICBib3VuZGFyeUdhcDogZmFsc2UsCiAgICAgICAgICBkYXRhOiBvcmlnaW5EYXRhLngKICAgICAgICB9LAogICAgICAgIHlBeGlzOiB7CiAgICAgICAgICB0eXBlOiAndmFsdWUnCiAgICAgICAgfSwKICAgICAgICBzZXJpZXM6IFt7CiAgICAgICAgICBuYW1lOiAn6K+35rGC6YePJywKICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgIHN0YWNrOiAnVG90YWwnLAogICAgICAgICAgZGF0YTogb3JpZ2luRGF0YVsi6K+35rGC6YePIl0sCiAgICAgICAgICBzbW9vdGg6IHRydWUKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAn5ZON5bqU6YePJywKICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgIHN0YWNrOiAnVG90YWwnLAogICAgICAgICAgZGF0YTogb3JpZ2luRGF0YVsi5ZON5bqU6YePIl0sCiAgICAgICAgICBzbW9vdGg6IHRydWUKICAgICAgICB9XQogICAgICB9OwogICAgICByZXFSZXNwVm9sdW1lQ2hhcnRPcHRpb24gJiYgcmVxUmVzcFZvbHVtZUNoYXJ0LnNldE9wdGlvbihyZXFSZXNwVm9sdW1lQ2hhcnRPcHRpb24pOwogICAgICB2YXIgcXVldWVWb2x1bWVDaGFydERvbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdxdWV1ZVZvbHVtZScpOwogICAgICB2YXIgcXVldWVWb2x1bWVDaGFydCA9IGVjaGFydHMuaW5pdChxdWV1ZVZvbHVtZUNoYXJ0RG9tKTsKICAgICAgdmFyIHF1ZXVlVm9sdW1lQ2hhcnRPcHRpb24gPSB7CiAgICAgICAgdGl0bGU6IHsKICAgICAgICAgIHRleHQ6ICLpmJ/liJfph48iCiAgICAgICAgfSwKICAgICAgICB0b29sdGlwOiB7CiAgICAgICAgICB0cmlnZ2VyOiAnYXhpcycKICAgICAgICB9LAogICAgICAgIGxlZ2VuZDogewogICAgICAgICAgZGF0YTogWyflvoXor7fmsYLmlbDph48nLCAn5bey5oqT5Y+W5pWw6YePJ10KICAgICAgICB9LAogICAgICAgIGdyaWQ6IHsKICAgICAgICAgIGxlZnQ6ICczJScsCiAgICAgICAgICByaWdodDogJzQlJywKICAgICAgICAgIGJvdHRvbTogJzMlJywKICAgICAgICAgIGNvbnRhaW5MYWJlbDogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgeEF4aXM6IHsKICAgICAgICAgIHR5cGU6ICdjYXRlZ29yeScsCiAgICAgICAgICBib3VuZGFyeUdhcDogZmFsc2UsCiAgICAgICAgICBkYXRhOiBvcmlnaW5EYXRhLngKICAgICAgICB9LAogICAgICAgIHlBeGlzOiB7CiAgICAgICAgICB0eXBlOiAndmFsdWUnCiAgICAgICAgfSwKICAgICAgICBzZXJpZXM6IFt7CiAgICAgICAgICBuYW1lOiAn5b6F6K+35rGC5pWw6YePJywKICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgIHN0YWNrOiAnVG90YWwnLAogICAgICAgICAgZGF0YTogb3JpZ2luRGF0YVsi5b6F6K+35rGC5pWw6YePIl0sCiAgICAgICAgICBzbW9vdGg6IHRydWUKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAn5bey5oqT5Y+W5pWw6YePJywKICAgICAgICAgIHR5cGU6ICdsaW5lJywKICAgICAgICAgIHN0YWNrOiAnVG90YWwnLAogICAgICAgICAgZGF0YTogb3JpZ2luRGF0YVsi5bey5oqT5Y+W5pWw6YePIl0sCiAgICAgICAgICBzbW9vdGg6IHRydWUKICAgICAgICB9XQogICAgICB9OwogICAgICBxdWV1ZVZvbHVtZUNoYXJ0T3B0aW9uICYmIHF1ZXVlVm9sdW1lQ2hhcnQuc2V0T3B0aW9uKHF1ZXVlVm9sdW1lQ2hhcnRPcHRpb24pOwogICAgICB2YXIgc3RhdHVzUmVzcFZvbHVtZUNoYXJ0RG9tID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3N0YXR1c1Jlc3BWb2x1bWUnKTsKICAgICAgdmFyIHN0YXR1c1Jlc3BWb2x1bWVDaGFydCA9IGVjaGFydHMuaW5pdChzdGF0dXNSZXNwVm9sdW1lQ2hhcnREb20pOwogICAgICB2YXIgc3RhdHVzUmVzcFZvbHVtZUNoYXJ0T3B0aW9uID0gewogICAgICAgIHRpdGxlOiB7CiAgICAgICAgICB0ZXh0OiAi54q25oCB56CB5ZON5bqU5pWwIgogICAgICAgIH0sCiAgICAgICAgdG9vbHRpcDogewogICAgICAgICAgdHJpZ2dlcjogJ2F4aXMnCiAgICAgICAgfSwKICAgICAgICBsZWdlbmQ6IHsKICAgICAgICAgIGRhdGE6IFsnMjAwJywgJzMwMScsICc0MDQnXQogICAgICAgIH0sCiAgICAgICAgZ3JpZDogewogICAgICAgICAgbGVmdDogJzMlJywKICAgICAgICAgIHJpZ2h0OiAnNCUnLAogICAgICAgICAgYm90dG9tOiAnMyUnLAogICAgICAgICAgY29udGFpbkxhYmVsOiB0cnVlCiAgICAgICAgfSwKICAgICAgICB4QXhpczogewogICAgICAgICAgdHlwZTogJ2NhdGVnb3J5JywKICAgICAgICAgIGJvdW5kYXJ5R2FwOiBmYWxzZSwKICAgICAgICAgIGRhdGE6IG9yaWdpbkRhdGEueAogICAgICAgIH0sCiAgICAgICAgeUF4aXM6IHsKICAgICAgICAgIHR5cGU6ICd2YWx1ZScKICAgICAgICB9LAogICAgICAgIHNlcmllczogW3sKICAgICAgICAgIG5hbWU6ICcyMDAnLAogICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgc3RhY2s6ICdUb3RhbCcsCiAgICAgICAgICBkYXRhOiBvcmlnaW5EYXRhWyIyMDAiXSwKICAgICAgICAgIHNtb290aDogdHJ1ZQogICAgICAgIH0sIHsKICAgICAgICAgIG5hbWU6ICczMDEnLAogICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgc3RhY2s6ICdUb3RhbCcsCiAgICAgICAgICBkYXRhOiBvcmlnaW5EYXRhWyIzMDEiXSwKICAgICAgICAgIHNtb290aDogdHJ1ZQogICAgICAgIH0sIHsKICAgICAgICAgIG5hbWU6ICc0MDQnLAogICAgICAgICAgdHlwZTogJ2xpbmUnLAogICAgICAgICAgc3RhY2s6ICdUb3RhbCcsCiAgICAgICAgICBkYXRhOiBvcmlnaW5EYXRhWyI0MDQiXSwKICAgICAgICAgIHNtb290aDogdHJ1ZQogICAgICAgIH1dCiAgICAgIH07CiAgICAgIHN0YXR1c1Jlc3BWb2x1bWVDaGFydE9wdGlvbiAmJiBzdGF0dXNSZXNwVm9sdW1lQ2hhcnQuc2V0T3B0aW9uKHN0YXR1c1Jlc3BWb2x1bWVDaGFydE9wdGlvbik7CiAgICB9LAogICAgc2hvd1VwZGF0ZVRpbWluZ1Rhc2tEaWFsb2c6IGZ1bmN0aW9uIHNob3dVcGRhdGVUaW1pbmdUYXNrRGlhbG9nKGpvYikgewogICAgICB0aGlzLnRpbWluZ1Rhc2sgPSBqb2I7CiAgICAgIHRoaXMuaXNBZGRUaW1lZFRhc2tCdG5WaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICByZXN1bWVUaW1lZFRhc2s6IGZ1bmN0aW9uIHJlc3VtZVRpbWVkVGFzayhqb2JfbmFtZSkgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHJlcXVlc3QoU1RBUlRfVElNSU5HLCBNRVRIT0QuUE9TVCwgewogICAgICAgICJ0aW1pbmdfam9iX25hbWUiOiBqb2JfbmFtZQogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGF0LnF1ZXJ5QWxsU2NoZWR1bGVUYXNrKCk7CiAgICAgICAgdGhhdC5pc0FkZFRpbWVkVGFza0J0blZpc2libGUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgcGF1c2VUaW1lZFRhc2s6IGZ1bmN0aW9uIHBhdXNlVGltZWRUYXNrKGpvYl9uYW1lKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgcmVxdWVzdChQQVVTRV9USU1JTkcsIE1FVEhPRC5QT1NULCB7CiAgICAgICAgInRpbWluZ19qb2JfbmFtZSI6IGpvYl9uYW1lCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHRoYXQucXVlcnlBbGxTY2hlZHVsZVRhc2soKTsKICAgICAgICB0aGF0LmlzQWRkVGltZWRUYXNrQnRuVmlzaWJsZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRQcm9qZWN0QWNjb3VudDogZnVuY3Rpb24gYWRkUHJvamVjdEFjY291bnQoKSB7CiAgICAgIHZhciB0aGF0ID0gdGhpczsKICAgICAgdmFyIHByb19uYW1lID0gdGhhdC5jdXJyZW50UHJvamVjdC5uYW1lOwogICAgICB2YXIgcGx0QWNjb3VudCA9IHRoYXQubmV3UHJvamVjdEFjY291bnQuc3BsaXQoIjogIik7CiAgICAgIHZhciBwbHQgPSBwbHRBY2NvdW50WzBdOwogICAgICB2YXIgYWNjb3VudCA9IHBsdEFjY291bnRbMV07CiAgICAgIHZhciByZXFPYmogPSB7CiAgICAgICAgInByb2plY3RfbmFtZSI6IHByb19uYW1lLAogICAgICAgICJ1cGRhdGVfYWNjIjoge30KICAgICAgfTsKICAgICAgcmVxT2JqLnVwZGF0ZV9hY2NbcGx0XSA9IHsKICAgICAgICAiYWRkIjogW2FjY291bnRdLAogICAgICAgICJybSI6IFtdCiAgICAgIH07CiAgICAgIHJlcXVlc3QoVVBEQVRFX1BST19BQ0NPVU5ULCBNRVRIT0QuUE9TVCwgcmVxT2JqKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGF0LnF1ZXJ5UHJvamVjdEFjY291bnQoKTsKICAgICAgICB0aGF0LmlzQWRkUGxhdGZvcm1BY2NvdW50c0J0blZpc2libGUgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlUHJvamVjdEFjY291bnQ6IGZ1bmN0aW9uIGRlbGV0ZVByb2plY3RBY2NvdW50KHJvdykgewogICAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICAgIHZhciBwcm9fbmFtZSA9IHRoYXQuY3VycmVudFByb2plY3QubmFtZTsKICAgICAgdmFyIGFjY291bnQgPSByb3cudXNlcjsKICAgICAgdmFyIHBsdCA9IHJvdy5wbGF0Zm9ybTsKICAgICAgdmFyIHJlcU9iaiA9IHsKICAgICAgICAicHJvamVjdF9uYW1lIjogcHJvX25hbWUsCiAgICAgICAgInVwZGF0ZV9hY2MiOiB7fQogICAgICB9OwogICAgICByZXFPYmoudXBkYXRlX2FjY1twbHRdID0gewogICAgICAgICJhZGQiOiBbXSwKICAgICAgICAicm0iOiBbYWNjb3VudF0KICAgICAgfTsKICAgICAgcmVxdWVzdChVUERBVEVfUFJPX0FDQ09VTlQsIE1FVEhPRC5QT1NULCByZXFPYmopLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHRoYXQucXVlcnlQcm9qZWN0QWNjb3VudCgpOwogICAgICAgIHRoYXQuaXNBZGRQbGF0Zm9ybUFjY291bnRzQnRuVmlzaWJsZSA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBoYW5kbGVDbG9zZTogZnVuY3Rpb24gaGFuZGxlQ2xvc2UoKSB7CiAgICAgIHRoaXMuaXNBZGREaXN0RXF1aXBCdG5WaXNpYmxlID0gZmFsc2U7CiAgICB9LAogICAgcXVlcnlQcm9qZWN0QWNjb3VudDogZnVuY3Rpb24gcXVlcnlQcm9qZWN0QWNjb3VudCgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB2YXIgcHJvX25hbWUgPSB0aGF0LmN1cnJlbnRQcm9qZWN0Lm5hbWU7CiAgICAgIHJlcXVlc3QoR0VUX0FDQ09VTlRfSU5GTywgTUVUSE9ELlBPU1QsIHsKICAgICAgICBwcm9qZWN0X25hbWU6IHByb19uYW1lCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoYXQucHJvamVjdEFjY291bnRzID0gW107CiAgICAgICAgICB2YXIgYWNjb3VudHMgPSByZXMuZGF0YS5hY2NvdW50OwoKICAgICAgICAgIGZvciAodmFyIHBsdCBpbiBhY2NvdW50cykgewogICAgICAgICAgICB2YXIgcGx0QWNjb3VudHMgPSBhY2NvdW50c1twbHRdOwoKICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHBsdEFjY291bnRzKSB7CiAgICAgICAgICAgICAgdGhhdC5wcm9qZWN0QWNjb3VudHMucHVzaChwbHRBY2NvdW50c1trZXldKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJlcXVlc3QoR0VUX0FDQ09VTlRfSU5GTywgTUVUSE9ELlBPU1QsIHsKICAgICAgICBwcm9qZWN0X25hbWU6ICIiCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAyMDApIHsKICAgICAgICAgIHRoYXQuYWxsQWNjb3VudHMgPSBbXTsKICAgICAgICAgIHZhciBhY2NvdW50cyA9IHJlcy5kYXRhLmFjY291bnQ7CgogICAgICAgICAgZm9yICh2YXIgcGx0IGluIGFjY291bnRzKSB7CiAgICAgICAgICAgIHZhciBwbHRBY2NvdW50cyA9IGFjY291bnRzW3BsdF07CgogICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gcGx0QWNjb3VudHMpIHsKICAgICAgICAgICAgICB0aGF0LmFsbEFjY291bnRzLnB1c2gocGx0QWNjb3VudHNba2V5XSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMucXVlcnlQcm9qZWN0cygpOwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoJ3NldHRpbmcnLCBbJ3BhZ2VNaW5IZWlnaHQnXSkpLCB7fSwgewogICAgZGVzYzogZnVuY3Rpb24gZGVzYygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHQoJ2Rlc2NyaXB0aW9uJyk7CiAgICB9CiAgfSkKfTs="},null]}