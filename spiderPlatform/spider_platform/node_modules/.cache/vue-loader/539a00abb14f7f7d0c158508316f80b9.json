{"remainingRequest":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Project\\spiderPlatform\\spider_platform\\src\\layouts\\tabs\\TabsView.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Project\\spiderPlatform\\spider_platform\\src\\layouts\\tabs\\TabsView.vue","mtime":1646988546855},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646988157970},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\babel-loader\\lib\\index.js","mtime":1646988157969},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646988157970},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\vue-loader\\lib\\index.js","mtime":1646988174758}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgQWRtaW5MYXlvdXQgZnJvbSAnQC9sYXlvdXRzL0FkbWluTGF5b3V0Jw0KaW1wb3J0IENvbnRleHRtZW51IGZyb20gJ0AvY29tcG9uZW50cy9tZW51L0NvbnRleHRtZW51Jw0KaW1wb3J0IFBhZ2VUb2dnbGVUcmFuc2l0aW9uIGZyb20gJ0AvY29tcG9uZW50cy90cmFuc2l0aW9uL1BhZ2VUb2dnbGVUcmFuc2l0aW9uJw0KaW1wb3J0IHttYXBTdGF0ZSwgbWFwTXV0YXRpb25zfSBmcm9tICd2dWV4Jw0KaW1wb3J0IHtnZXRJMThuS2V5fSBmcm9tICdAL3V0aWxzL3JvdXRlclV0aWwnDQppbXBvcnQgQUtlZXBBbGl2ZSBmcm9tICdAL2NvbXBvbmVudHMvY2FjaGUvQUtlZXBBbGl2ZScNCmltcG9ydCBUYWJzSGVhZCBmcm9tICdAL2xheW91dHMvdGFicy9UYWJzSGVhZCcNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAnVGFic1ZpZXcnLA0KICBpMThuOiByZXF1aXJlKCcuL2kxOG4nKSwNCiAgY29tcG9uZW50czoge1RhYnNIZWFkLCBQYWdlVG9nZ2xlVHJhbnNpdGlvbiwgQ29udGV4dG1lbnUsIEFkbWluTGF5b3V0ICwgQUtlZXBBbGl2ZSB9LA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgY2xlYXJDYWNoZXM6IFtdLA0KICAgICAgcGFnZUxpc3Q6IFtdLA0KICAgICAgYWN0aXZlUGFnZTogJycsDQogICAgICBtZW51VmlzaWJsZTogZmFsc2UsDQogICAgICByZWZyZXNoaW5nOiBmYWxzZSwNCiAgICAgIGV4Y2x1ZGVLZXlzOiBbXQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBTdGF0ZSgnc2V0dGluZycsIFsnbXVsdGlQYWdlJywgJ2NhY2hlUGFnZScsICdhbmltYXRlJywgJ2xheW91dCcsICdwYWdlV2lkdGgnXSksDQogICAgbWVudUl0ZW1MaXN0KCkgew0KICAgICAgcmV0dXJuIFsNCiAgICAgICAgeyBrZXk6ICcxJywgaWNvbjogJ3ZlcnRpY2FsLXJpZ2h0JywgdGV4dDogdGhpcy4kdCgnY2xvc2VMZWZ0JykgfSwNCiAgICAgICAgeyBrZXk6ICcyJywgaWNvbjogJ3ZlcnRpY2FsLWxlZnQnLCB0ZXh0OiB0aGlzLiR0KCdjbG9zZVJpZ2h0JykgfSwNCiAgICAgICAgeyBrZXk6ICczJywgaWNvbjogJ2Nsb3NlJywgdGV4dDogdGhpcy4kdCgnY2xvc2VPdGhlcnMnKSB9LA0KICAgICAgICB7IGtleTogJzQnLCBpY29uOiAnc3luYycsIHRleHQ6IHRoaXMuJHQoJ3JlZnJlc2gnKSB9LA0KICAgICAgXQ0KICAgIH0sDQogICAgdGFic09mZnNldCgpIHsNCiAgICAgIHJldHVybiB0aGlzLm11bHRpUGFnZSA/IDI0IDogMA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCAoKSB7DQogICAgdGhpcy5sb2FkQ2FjaGVDb25maWcodGhpcy4kcm91dGVyPy5vcHRpb25zPy5yb3V0ZXMpDQogICAgdGhpcy5sb2FkQ2FjaGVkVGFicygpDQogICAgY29uc3Qgcm91dGUgPSB0aGlzLiRyb3V0ZQ0KICAgIGlmICh0aGlzLnBhZ2VMaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0ucGF0aCA9PT0gcm91dGUucGF0aCkgPT09IC0xKSB7DQogICAgICB0aGlzLnBhZ2VMaXN0LnB1c2godGhpcy5jcmVhdGVQYWdlKHJvdXRlKSkNCiAgICB9DQogICAgdGhpcy5hY3RpdmVQYWdlID0gcm91dGUucGF0aA0KICAgIGlmICh0aGlzLm11bHRpUGFnZSkgew0KICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLnNldENhY2hlZEtleShyb3V0ZSkNCiAgICAgIH0pDQogICAgICB0aGlzLmFkZExpc3RlbmVyKCkNCiAgICB9DQogIH0sDQogIG1vdW50ZWQgKCkgew0KICAgIHRoaXMuY29ycmVjdFBhZ2VNaW5IZWlnaHQoLXRoaXMudGFic09mZnNldCkNCiAgfSwNCiAgYmVmb3JlRGVzdHJveSgpIHsNCiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKCkNCiAgICB0aGlzLmNvcnJlY3RQYWdlTWluSGVpZ2h0KHRoaXMudGFic09mZnNldCkNCiAgfSwNCiAgd2F0Y2g6IHsNCiAgICAnJHJvdXRlci5vcHRpb25zLnJvdXRlcyc6IGZ1bmN0aW9uICh2YWwpIHsNCiAgICAgIHRoaXMuZXhjbHVkZUtleXMgPSBbXQ0KICAgICAgdGhpcy5sb2FkQ2FjaGVDb25maWcodmFsKQ0KICAgIH0sDQogICAgJyRyb3V0ZSc6IGZ1bmN0aW9uIChuZXdSb3V0ZSkgew0KICAgICAgdGhpcy5hY3RpdmVQYWdlID0gbmV3Um91dGUucGF0aA0KICAgICAgY29uc3QgcGFnZSA9IHRoaXMucGFnZUxpc3QuZmluZChpdGVtID0+IGl0ZW0ucGF0aCA9PT0gbmV3Um91dGUucGF0aCkNCiAgICAgIGlmICghdGhpcy5tdWx0aVBhZ2UpIHsNCiAgICAgICAgdGhpcy5wYWdlTGlzdCA9IFt0aGlzLmNyZWF0ZVBhZ2UobmV3Um91dGUpXQ0KICAgICAgfSBlbHNlIGlmIChwYWdlKSB7DQogICAgICAgIHBhZ2UuZnVsbFBhdGggPSBuZXdSb3V0ZS5mdWxsUGF0aA0KICAgICAgfSBlbHNlIGlmICghcGFnZSkgew0KICAgICAgICB0aGlzLnBhZ2VMaXN0LnB1c2godGhpcy5jcmVhdGVQYWdlKG5ld1JvdXRlKSkNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLm11bHRpUGFnZSkgew0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgdGhpcy5zZXRDYWNoZWRLZXkobmV3Um91dGUpDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICAnbXVsdGlQYWdlJzogZnVuY3Rpb24gKG5ld1ZhbCkgew0KICAgICAgaWYgKCFuZXdWYWwpIHsNCiAgICAgICAgdGhpcy5wYWdlTGlzdCA9IFt0aGlzLmNyZWF0ZVBhZ2UodGhpcy4kcm91dGUpXQ0KICAgICAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuYWRkTGlzdGVuZXIoKQ0KICAgICAgfQ0KICAgIH0sDQogICAgdGFic09mZnNldChuZXdWYWwsIG9sZFZhbCkgew0KICAgICAgdGhpcy5jb3JyZWN0UGFnZU1pbkhlaWdodChvbGRWYWwgLSBuZXdWYWwpDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY2hhbmdlUGFnZSAoa2V5KSB7DQogICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSBrZXkNCiAgICAgIGNvbnN0IHBhZ2UgPSB0aGlzLnBhZ2VMaXN0LmZpbmQoaXRlbSA9PiBpdGVtLnBhdGggPT09IGtleSkNCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHBhZ2UuZnVsbFBhdGgpDQogICAgfSwNCiAgICByZW1vdmUgKGtleSwgbmV4dCkgew0KICAgICAgaWYgKHRoaXMucGFnZUxpc3QubGVuZ3RoID09PSAxKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRtZXNzYWdlLndhcm5pbmcodGhpcy4kdCgnd2FybicpKQ0KICAgICAgfQ0KICAgICAgLy/muIXpmaTnvJPlrZgNCiAgICAgIGxldCBpbmRleCA9IHRoaXMucGFnZUxpc3QuZmluZEluZGV4KGl0ZW0gPT4gaXRlbS5wYXRoID09PSBrZXkpDQogICAgICB0aGlzLmNsZWFyQ2FjaGVzID0gdGhpcy5wYWdlTGlzdC5zcGxpY2UoaW5kZXgsIDEpLm1hcChwYWdlID0+IHBhZ2UuY2FjaGVkS2V5KQ0KICAgICAgaWYgKG5leHQpIHsNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2gobmV4dCkNCiAgICAgIH0gZWxzZSBpZiAoa2V5ID09PSB0aGlzLmFjdGl2ZVBhZ2UpIHsNCiAgICAgICAgaW5kZXggPSBpbmRleCA+PSB0aGlzLnBhZ2VMaXN0Lmxlbmd0aCA/IHRoaXMucGFnZUxpc3QubGVuZ3RoIC0gMSA6IGluZGV4DQogICAgICAgIHRoaXMuYWN0aXZlUGFnZSA9IHRoaXMucGFnZUxpc3RbaW5kZXhdLnBhdGgNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2godGhpcy5hY3RpdmVQYWdlKQ0KICAgICAgfQ0KICAgIH0sDQogICAgcmVmcmVzaCAoa2V5LCBwYWdlKSB7DQogICAgICBwYWdlID0gcGFnZSB8fCB0aGlzLnBhZ2VMaXN0LmZpbmQoaXRlbSA9PiBpdGVtLnBhdGggPT09IGtleSkNCiAgICAgIHBhZ2UubG9hZGluZyA9IHRydWUNCiAgICAgIHRoaXMuY2xlYXJDYWNoZShwYWdlKQ0KICAgICAgaWYgKGtleSA9PT0gdGhpcy5hY3RpdmVQYWdlKSB7DQogICAgICAgIHRoaXMucmVsb2FkQ29udGVudCgoKSA9PiBwYWdlLmxvYWRpbmcgPSBmYWxzZSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIOWFtuWunuWIt+aWsOW+iOW/q++8jOWKoOi/meS4quW7tui/n+e6r+eyueS4uuS6hiBsb2FkaW5nIOeKtuaAgeWkmuWxleekuuS4gOS8muWEv++8jOiuqeeUqOaIt+aEn+efpeWIt+aWsOi/meS4gOi/h+eoiw0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHBhZ2UubG9hZGluZyA9IGZhbHNlLCA1MDApDQogICAgICB9DQogICAgfSwNCiAgICBvbkNvbnRleHRtZW51KHBhZ2VLZXksIGUpIHsNCiAgICAgIGlmIChwYWdlS2V5KSB7DQogICAgICAgIGUucHJldmVudERlZmF1bHQoKQ0KICAgICAgICBlLm1ldGEgPSBwYWdlS2V5DQogICAgICAgIHRoaXMubWVudVZpc2libGUgPSB0cnVlDQogICAgICB9DQogICAgfSwNCiAgICBvbk1lbnVTZWxlY3QgKGtleSwgdGFyZ2V0LCBwYWdlS2V5KSB7DQogICAgICBzd2l0Y2ggKGtleSkgew0KICAgICAgICBjYXNlICcxJzogdGhpcy5jbG9zZUxlZnQocGFnZUtleSk7IGJyZWFrDQogICAgICAgIGNhc2UgJzInOiB0aGlzLmNsb3NlUmlnaHQocGFnZUtleSk7IGJyZWFrDQogICAgICAgIGNhc2UgJzMnOiB0aGlzLmNsb3NlT3RoZXJzKHBhZ2VLZXkpOyBicmVhaw0KICAgICAgICBjYXNlICc0JzogdGhpcy5yZWZyZXNoKHBhZ2VLZXkpOyBicmVhaw0KICAgICAgICBkZWZhdWx0OiBicmVhaw0KICAgICAgfQ0KICAgIH0sDQogICAgY2xvc2VPdGhlcnMgKHBhZ2VLZXkpIHsNCiAgICAgIC8vIOa4hemZpOe8k+WtmA0KICAgICAgY29uc3QgY2xlYXJQYWdlcyA9IHRoaXMucGFnZUxpc3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5wYXRoICE9PSBwYWdlS2V5ICYmICFpdGVtLnVuY2xvc2UpDQogICAgICB0aGlzLmNsZWFyQ2FjaGVzID0gY2xlYXJQYWdlcy5tYXAoaXRlbSA9PiBpdGVtLmNhY2hlZEtleSkNCiAgICAgIHRoaXMucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcihpdGVtID0+ICFjbGVhclBhZ2VzLmluY2x1ZGVzKGl0ZW0pKQ0KICAgICAgLy8g5Yik5pat6Lez6L2sDQogICAgICBpZiAodGhpcy5hY3RpdmVQYWdlICE9IHBhZ2VLZXkpIHsNCiAgICAgICAgdGhpcy5hY3RpdmVQYWdlID0gcGFnZUtleQ0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh0aGlzLmFjdGl2ZVBhZ2UpDQogICAgICB9DQogICAgfSwNCiAgICBjbG9zZUxlZnQgKHBhZ2VLZXkpIHsNCiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wYWdlTGlzdC5maW5kSW5kZXgoaXRlbSA9PiBpdGVtLnBhdGggPT09IHBhZ2VLZXkpDQogICAgICAvLyDmuIXpmaTnvJPlrZgNCiAgICAgIGNvbnN0IGNsZWFyUGFnZXMgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcigoaXRlbSwgaSkgPT4gaSA8IGluZGV4ICYmICFpdGVtLnVuY2xvc2UpDQogICAgICB0aGlzLmNsZWFyQ2FjaGVzID0gY2xlYXJQYWdlcy5tYXAoaXRlbSA9PiBpdGVtLmNhY2hlZEtleSkNCiAgICAgIHRoaXMucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcihpdGVtID0+ICFjbGVhclBhZ2VzLmluY2x1ZGVzKGl0ZW0pKQ0KICAgICAgLy8g5Yik5pat6Lez6L2sDQogICAgICBpZiAoIXRoaXMucGFnZUxpc3QuZmluZChpdGVtID0+IGl0ZW0ucGF0aCA9PT0gdGhpcy5hY3RpdmVQYWdlKSkgew0KICAgICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSBwYWdlS2V5DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuYWN0aXZlUGFnZSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGNsb3NlUmlnaHQgKHBhZ2VLZXkpIHsNCiAgICAgIC8vIOa4hemZpOe8k+WtmA0KICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhZ2VMaXN0LmZpbmRJbmRleChpdGVtID0+IGl0ZW0ucGF0aCA9PT0gcGFnZUtleSkNCiAgICAgIGNvbnN0IGNsZWFyUGFnZXMgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcigoaXRlbSwgaSkgPT4gaSA+IGluZGV4ICYmICFpdGVtLnVuY2xvc2UpDQogICAgICB0aGlzLmNsZWFyQ2FjaGVzID0gY2xlYXJQYWdlcy5tYXAoaXRlbSA9PiBpdGVtLmNhY2hlZEtleSkNCiAgICAgIHRoaXMucGFnZUxpc3QgPSB0aGlzLnBhZ2VMaXN0LmZpbHRlcihpdGVtID0+ICFjbGVhclBhZ2VzLmluY2x1ZGVzKGl0ZW0pKQ0KICAgICAgLy8g5Yik5pat6Lez6L2sDQogICAgICBpZiAoIXRoaXMucGFnZUxpc3QuZmluZChpdGVtID0+IGl0ZW0ucGF0aCA9PT0gdGhpcy5hY3RpdmVQYWdlKSkgew0KICAgICAgICB0aGlzLmFjdGl2ZVBhZ2UgPSBwYWdlS2V5DQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMuYWN0aXZlUGFnZSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGNsZWFyQ2FjaGUocGFnZSkgew0KICAgICAgcGFnZS5faW5pdF8gPSBmYWxzZQ0KICAgICAgdGhpcy5jbGVhckNhY2hlcyA9IFtwYWdlLmNhY2hlZEtleV0NCiAgICB9LA0KICAgIHJlbG9hZENvbnRlbnQob25Mb2FkZWQpIHsNCiAgICAgIHRoaXMucmVmcmVzaGluZyA9IHRydWUNCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICB0aGlzLnJlZnJlc2hpbmcgPSBmYWxzZQ0KICAgICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgICAgdGhpcy5zZXRDYWNoZWRLZXkodGhpcy4kcm91dGUpDQogICAgICAgICAgaWYgKHR5cGVvZiBvbkxvYWRlZCA9PT0gJ2Z1bmN0aW9uJykgew0KICAgICAgICAgICAgb25Mb2FkZWQuYXBwbHkodGhpcywgW10pDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgfSwgMjAwKQ0KICAgIH0sDQogICAgcGFnZU5hbWUocGFnZSkgew0KICAgICAgcmV0dXJuIHRoaXMuJHQoZ2V0STE4bktleShwYWdlLmtleVBhdGgpKQ0KICAgIH0sDQogICAgLyoqDQogICAgICog5re75Yqg55uR5ZCs5ZmoDQogICAgICovDQogICAgYWRkTGlzdGVuZXIoKSB7DQogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZTpjbG9zZScsIHRoaXMuY2xvc2VQYWdlTGlzdGVuZXIpDQogICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncGFnZTpyZWZyZXNoJywgdGhpcy5yZWZyZXNoUGFnZUxpc3RlbmVyKQ0KICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3VubG9hZCcsIHRoaXMudW5sb2FkTGlzdGVuZXIpDQogICAgfSwNCiAgICAvKioNCiAgICAgKiDnp7vlh7rnm5HlkKzlmagNCiAgICAgKi8NCiAgICByZW1vdmVMaXN0ZW5lcigpIHsNCiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwYWdlOmNsb3NlJywgdGhpcy5jbG9zZVBhZ2VMaXN0ZW5lcikNCiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwYWdlOnJlZnJlc2gnLCB0aGlzLnJlZnJlc2hQYWdlTGlzdGVuZXIpDQogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndW5sb2FkJywgdGhpcy51bmxvYWRMaXN0ZW5lcikNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOmhteetvuWFs+mXreS6i+S7tuebkeWQrA0KICAgICAqIEBwYXJhbSBldmVudCDpobXnrb7lhbPpl63kuovku7YNCiAgICAgKi8NCiAgICBjbG9zZVBhZ2VMaXN0ZW5lcihldmVudCkgew0KICAgICAgY29uc3Qge2Nsb3NlUm91dGUsIG5leHRSb3V0ZX0gPSBldmVudC5kZXRhaWwNCiAgICAgIGNvbnN0IGNsb3NlUGF0aCA9IHR5cGVvZiBjbG9zZVJvdXRlID09PSAnc3RyaW5nJyA/IGNsb3NlUm91dGUgOiBjbG9zZVJvdXRlLnBhdGgNCiAgICAgIGNvbnN0IHBhdGggPSBjbG9zZVBhdGggJiYgY2xvc2VQYXRoLnNwbGl0KCc/JylbMF0NCiAgICAgIHRoaXMucmVtb3ZlKHBhdGgsIG5leHRSb3V0ZSkNCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOmhtemdouWIt+aWsOS6i+S7tuebkeWQrA0KICAgICAqIEBwYXJhbSBldmVudCDpobXnrb7lhbPpl63kuovku7YNCiAgICAgKi8NCiAgICByZWZyZXNoUGFnZUxpc3RlbmVyKGV2ZW50KSB7DQogICAgICBjb25zdCB7cGFnZUtleX0gPSBldmVudC5kZXRhaWwNCiAgICAgIGNvbnN0IHBhdGggPSBwYWdlS2V5ICYmIHBhZ2VLZXkuc3BsaXQoJz8nKVswXQ0KICAgICAgdGhpcy5yZWZyZXNoKHBhdGgpDQogICAgfSwNCiAgICAvKioNCiAgICAgKiDpobXpnaIgdW5sb2FkIOS6i+S7tuebkeWQrOWZqO+8jOa3u+WKoOmhteetvuWIsCBzZXNzaW9uIOe8k+WtmO+8jOeUqOS6juWIt+aWsOaXtuS/neeVmemhteetvg0KICAgICAqLw0KICAgIHVubG9hZExpc3RlbmVyKCkgew0KICAgICAgY29uc3QgdGFicyA9IHRoaXMucGFnZUxpc3QubWFwKGl0ZW0gPT4gKHsuLi5pdGVtLCBfaW5pdF86IGZhbHNlfSkpDQogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKHByb2Nlc3MuZW52LlZVRV9BUFBfVEJBU19LRVksIEpTT04uc3RyaW5naWZ5KHRhYnMpKQ0KICAgIH0sDQogICAgY3JlYXRlUGFnZShyb3V0ZSkgew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAga2V5UGF0aDogcm91dGUubWF0Y2hlZFtyb3V0ZS5tYXRjaGVkLmxlbmd0aCAtIDFdLnBhdGgsDQogICAgICAgIGZ1bGxQYXRoOiByb3V0ZS5mdWxsUGF0aCwgbG9hZGluZzogZmFsc2UsDQogICAgICAgIHBhdGg6IHJvdXRlLnBhdGgsDQogICAgICAgIHRpdGxlOiByb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEucGFnZSAmJiByb3V0ZS5tZXRhLnBhZ2UudGl0bGUsDQogICAgICAgIHVuY2xvc2U6IHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5wYWdlICYmIChyb3V0ZS5tZXRhLnBhZ2UuY2xvc2FibGUgPT09IGZhbHNlKSwNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOiuvue9rumhtemdoue8k+WtmOeahGtleQ0KICAgICAqIEBwYXJhbSByb3V0ZSDpobXpnaLlr7nlupTnmoTot6/nlLENCiAgICAgKi8NCiAgICBzZXRDYWNoZWRLZXkocm91dGUpIHsNCiAgICAgIGNvbnN0IHBhZ2UgPSB0aGlzLnBhZ2VMaXN0LmZpbmQoaXRlbSA9PiBpdGVtLnBhdGggPT09IHJvdXRlLnBhdGgpDQogICAgICBwYWdlLnVuY2xvc2UgPSByb3V0ZS5tZXRhICYmIHJvdXRlLm1ldGEucGFnZSAmJiAocm91dGUubWV0YS5wYWdlLmNsb3NhYmxlID09PSBmYWxzZSkNCiAgICAgIGlmICghcGFnZS5faW5pdF8pIHsNCiAgICAgICAgY29uc3Qgdm5vZGUgPSB0aGlzLiRyZWZzLnRhYkNvbnRlbnQuJHZub2RlDQogICAgICAgIHBhZ2UuY2FjaGVkS2V5ID0gdm5vZGUua2V5ICsgdm5vZGUuY29tcG9uZW50T3B0aW9ucy5DdG9yLmNpZA0KICAgICAgICBwYWdlLl9pbml0XyA9IHRydWUNCiAgICAgIH0NCiAgICB9LA0KICAgIC8qKg0KICAgICAqIOWKoOi9vee8k+WtmOeahCB0YWJzDQogICAgICovDQogICAgbG9hZENhY2hlZFRhYnMoKSB7DQogICAgICBjb25zdCBjYWNoZWRUYWJzU3RyID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShwcm9jZXNzLmVudi5WVUVfQVBQX1RCQVNfS0VZKQ0KICAgICAgaWYgKGNhY2hlZFRhYnNTdHIpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAgICAgICBjb25zdCBjYWNoZWRUYWJzID0gSlNPTi5wYXJzZShjYWNoZWRUYWJzU3RyKQ0KICAgICAgICAgIGlmIChjYWNoZWRUYWJzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIHRoaXMucGFnZUxpc3QgPSBjYWNoZWRUYWJzDQogICAgICAgICAgfQ0KICAgICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgICAgY29uc29sZS53YXJuKCdmYWlsZWQgdG8gbG9hZCBjYWNoZWQgdGFicywgZ290IGV4Y2VwdGlvbjonLCBlKQ0KICAgICAgICB9IGZpbmFsbHkgew0KICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0ocHJvY2Vzcy5lbnYuVlVFX0FQUF9UQkFTX0tFWSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgbG9hZENhY2hlQ29uZmlnKHJvdXRlcywgcENhY2hlID0gdHJ1ZSkgew0KICAgICAgcm91dGVzLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgIGNvbnN0IGNhY2hlQWJsZSA9IGl0ZW0ubWV0YT8ucGFnZT8uY2FjaGVBYmxlID8/IHBDYWNoZSA/PyB0cnVlDQogICAgICAgIGlmICghY2FjaGVBYmxlKSB7DQogICAgICAgICAgdGhpcy5leGNsdWRlS2V5cy5wdXNoKG5ldyBSZWdFeHAoYCR7aXRlbS5wYXRofVxcZCskYCkpDQogICAgICAgIH0NCiAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHsNCiAgICAgICAgICB0aGlzLmxvYWRDYWNoZUNvbmZpZyhpdGVtLmNoaWxkcmVuLCBjYWNoZUFibGUpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICAuLi5tYXBNdXRhdGlvbnMoJ3NldHRpbmcnLCBbJ2NvcnJlY3RQYWdlTWluSGVpZ2h0J10pDQogIH0NCn0NCg=="},{"version":3,"sources":["TabsView.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TabsView.vue","sourceRoot":"src/layouts/tabs","sourcesContent":["<template>\r\n  <admin-layout>\r\n    <contextmenu :itemList=\"menuItemList\" :visible.sync=\"menuVisible\" @select=\"onMenuSelect\" />\r\n    <tabs-head\r\n        v-if=\"multiPage\"\r\n        :active=\"activePage\"\r\n        :page-list=\"pageList\"\r\n        @change=\"changePage\"\r\n        @close=\"remove\"\r\n        @refresh=\"refresh\"\r\n        @contextmenu=\"onContextmenu\"\r\n    />\r\n    <div :class=\"['tabs-view-content', layout, pageWidth]\" :style=\"`margin-top: ${multiPage ? -24 : 0}px`\">\r\n      <page-toggle-transition :disabled=\"animate.disabled\" :animate=\"animate.name\" :direction=\"animate.direction\">\r\n        <a-keep-alive :exclude-keys=\"excludeKeys\" v-if=\"multiPage && cachePage\" v-model=\"clearCaches\">\r\n          <router-view v-if=\"!refreshing\" ref=\"tabContent\" :key=\"$route.path\" />\r\n        </a-keep-alive>\r\n        <router-view ref=\"tabContent\" v-else-if=\"!refreshing\" />\r\n      </page-toggle-transition>\r\n    </div>\r\n  </admin-layout>\r\n</template>\r\n\r\n<script>\r\nimport AdminLayout from '@/layouts/AdminLayout'\r\nimport Contextmenu from '@/components/menu/Contextmenu'\r\nimport PageToggleTransition from '@/components/transition/PageToggleTransition'\r\nimport {mapState, mapMutations} from 'vuex'\r\nimport {getI18nKey} from '@/utils/routerUtil'\r\nimport AKeepAlive from '@/components/cache/AKeepAlive'\r\nimport TabsHead from '@/layouts/tabs/TabsHead'\r\n\r\nexport default {\r\n  name: 'TabsView',\r\n  i18n: require('./i18n'),\r\n  components: {TabsHead, PageToggleTransition, Contextmenu, AdminLayout , AKeepAlive },\r\n  data () {\r\n    return {\r\n      clearCaches: [],\r\n      pageList: [],\r\n      activePage: '',\r\n      menuVisible: false,\r\n      refreshing: false,\r\n      excludeKeys: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapState('setting', ['multiPage', 'cachePage', 'animate', 'layout', 'pageWidth']),\r\n    menuItemList() {\r\n      return [\r\n        { key: '1', icon: 'vertical-right', text: this.$t('closeLeft') },\r\n        { key: '2', icon: 'vertical-left', text: this.$t('closeRight') },\r\n        { key: '3', icon: 'close', text: this.$t('closeOthers') },\r\n        { key: '4', icon: 'sync', text: this.$t('refresh') },\r\n      ]\r\n    },\r\n    tabsOffset() {\r\n      return this.multiPage ? 24 : 0\r\n    }\r\n  },\r\n  created () {\r\n    this.loadCacheConfig(this.$router?.options?.routes)\r\n    this.loadCachedTabs()\r\n    const route = this.$route\r\n    if (this.pageList.findIndex(item => item.path === route.path) === -1) {\r\n      this.pageList.push(this.createPage(route))\r\n    }\r\n    this.activePage = route.path\r\n    if (this.multiPage) {\r\n      this.$nextTick(() => {\r\n        this.setCachedKey(route)\r\n      })\r\n      this.addListener()\r\n    }\r\n  },\r\n  mounted () {\r\n    this.correctPageMinHeight(-this.tabsOffset)\r\n  },\r\n  beforeDestroy() {\r\n    this.removeListener()\r\n    this.correctPageMinHeight(this.tabsOffset)\r\n  },\r\n  watch: {\r\n    '$router.options.routes': function (val) {\r\n      this.excludeKeys = []\r\n      this.loadCacheConfig(val)\r\n    },\r\n    '$route': function (newRoute) {\r\n      this.activePage = newRoute.path\r\n      const page = this.pageList.find(item => item.path === newRoute.path)\r\n      if (!this.multiPage) {\r\n        this.pageList = [this.createPage(newRoute)]\r\n      } else if (page) {\r\n        page.fullPath = newRoute.fullPath\r\n      } else if (!page) {\r\n        this.pageList.push(this.createPage(newRoute))\r\n      }\r\n      if (this.multiPage) {\r\n        this.$nextTick(() => {\r\n          this.setCachedKey(newRoute)\r\n        })\r\n      }\r\n    },\r\n    'multiPage': function (newVal) {\r\n      if (!newVal) {\r\n        this.pageList = [this.createPage(this.$route)]\r\n        this.removeListener()\r\n      } else {\r\n        this.addListener()\r\n      }\r\n    },\r\n    tabsOffset(newVal, oldVal) {\r\n      this.correctPageMinHeight(oldVal - newVal)\r\n    }\r\n  },\r\n  methods: {\r\n    changePage (key) {\r\n      this.activePage = key\r\n      const page = this.pageList.find(item => item.path === key)\r\n      this.$router.push(page.fullPath)\r\n    },\r\n    remove (key, next) {\r\n      if (this.pageList.length === 1) {\r\n        return this.$message.warning(this.$t('warn'))\r\n      }\r\n      //清除缓存\r\n      let index = this.pageList.findIndex(item => item.path === key)\r\n      this.clearCaches = this.pageList.splice(index, 1).map(page => page.cachedKey)\r\n      if (next) {\r\n        this.$router.push(next)\r\n      } else if (key === this.activePage) {\r\n        index = index >= this.pageList.length ? this.pageList.length - 1 : index\r\n        this.activePage = this.pageList[index].path\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    refresh (key, page) {\r\n      page = page || this.pageList.find(item => item.path === key)\r\n      page.loading = true\r\n      this.clearCache(page)\r\n      if (key === this.activePage) {\r\n        this.reloadContent(() => page.loading = false)\r\n      } else {\r\n        // 其实刷新很快，加这个延迟纯粹为了 loading 状态多展示一会儿，让用户感知刷新这一过程\r\n        setTimeout(() => page.loading = false, 500)\r\n      }\r\n    },\r\n    onContextmenu(pageKey, e) {\r\n      if (pageKey) {\r\n        e.preventDefault()\r\n        e.meta = pageKey\r\n        this.menuVisible = true\r\n      }\r\n    },\r\n    onMenuSelect (key, target, pageKey) {\r\n      switch (key) {\r\n        case '1': this.closeLeft(pageKey); break\r\n        case '2': this.closeRight(pageKey); break\r\n        case '3': this.closeOthers(pageKey); break\r\n        case '4': this.refresh(pageKey); break\r\n        default: break\r\n      }\r\n    },\r\n    closeOthers (pageKey) {\r\n      // 清除缓存\r\n      const clearPages = this.pageList.filter(item => item.path !== pageKey && !item.unclose)\r\n      this.clearCaches = clearPages.map(item => item.cachedKey)\r\n      this.pageList = this.pageList.filter(item => !clearPages.includes(item))\r\n      // 判断跳转\r\n      if (this.activePage != pageKey) {\r\n        this.activePage = pageKey\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    closeLeft (pageKey) {\r\n      const index = this.pageList.findIndex(item => item.path === pageKey)\r\n      // 清除缓存\r\n      const clearPages = this.pageList.filter((item, i) => i < index && !item.unclose)\r\n      this.clearCaches = clearPages.map(item => item.cachedKey)\r\n      this.pageList = this.pageList.filter(item => !clearPages.includes(item))\r\n      // 判断跳转\r\n      if (!this.pageList.find(item => item.path === this.activePage)) {\r\n        this.activePage = pageKey\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    closeRight (pageKey) {\r\n      // 清除缓存\r\n      const index = this.pageList.findIndex(item => item.path === pageKey)\r\n      const clearPages = this.pageList.filter((item, i) => i > index && !item.unclose)\r\n      this.clearCaches = clearPages.map(item => item.cachedKey)\r\n      this.pageList = this.pageList.filter(item => !clearPages.includes(item))\r\n      // 判断跳转\r\n      if (!this.pageList.find(item => item.path === this.activePage)) {\r\n        this.activePage = pageKey\r\n        this.$router.push(this.activePage)\r\n      }\r\n    },\r\n    clearCache(page) {\r\n      page._init_ = false\r\n      this.clearCaches = [page.cachedKey]\r\n    },\r\n    reloadContent(onLoaded) {\r\n      this.refreshing = true\r\n      setTimeout(() => {\r\n        this.refreshing = false\r\n        this.$nextTick(() => {\r\n          this.setCachedKey(this.$route)\r\n          if (typeof onLoaded === 'function') {\r\n            onLoaded.apply(this, [])\r\n          }\r\n        })\r\n      }, 200)\r\n    },\r\n    pageName(page) {\r\n      return this.$t(getI18nKey(page.keyPath))\r\n    },\r\n    /**\r\n     * 添加监听器\r\n     */\r\n    addListener() {\r\n      window.addEventListener('page:close', this.closePageListener)\r\n      window.addEventListener('page:refresh', this.refreshPageListener)\r\n      window.addEventListener('unload', this.unloadListener)\r\n    },\r\n    /**\r\n     * 移出监听器\r\n     */\r\n    removeListener() {\r\n      window.removeEventListener('page:close', this.closePageListener)\r\n      window.removeEventListener('page:refresh', this.refreshPageListener)\r\n      window.removeEventListener('unload', this.unloadListener)\r\n    },\r\n    /**\r\n     * 页签关闭事件监听\r\n     * @param event 页签关闭事件\r\n     */\r\n    closePageListener(event) {\r\n      const {closeRoute, nextRoute} = event.detail\r\n      const closePath = typeof closeRoute === 'string' ? closeRoute : closeRoute.path\r\n      const path = closePath && closePath.split('?')[0]\r\n      this.remove(path, nextRoute)\r\n    },\r\n    /**\r\n     * 页面刷新事件监听\r\n     * @param event 页签关闭事件\r\n     */\r\n    refreshPageListener(event) {\r\n      const {pageKey} = event.detail\r\n      const path = pageKey && pageKey.split('?')[0]\r\n      this.refresh(path)\r\n    },\r\n    /**\r\n     * 页面 unload 事件监听器，添加页签到 session 缓存，用于刷新时保留页签\r\n     */\r\n    unloadListener() {\r\n      const tabs = this.pageList.map(item => ({...item, _init_: false}))\r\n      sessionStorage.setItem(process.env.VUE_APP_TBAS_KEY, JSON.stringify(tabs))\r\n    },\r\n    createPage(route) {\r\n      return {\r\n        keyPath: route.matched[route.matched.length - 1].path,\r\n        fullPath: route.fullPath, loading: false,\r\n        path: route.path,\r\n        title: route.meta && route.meta.page && route.meta.page.title,\r\n        unclose: route.meta && route.meta.page && (route.meta.page.closable === false),\r\n      }\r\n    },\r\n    /**\r\n     * 设置页面缓存的key\r\n     * @param route 页面对应的路由\r\n     */\r\n    setCachedKey(route) {\r\n      const page = this.pageList.find(item => item.path === route.path)\r\n      page.unclose = route.meta && route.meta.page && (route.meta.page.closable === false)\r\n      if (!page._init_) {\r\n        const vnode = this.$refs.tabContent.$vnode\r\n        page.cachedKey = vnode.key + vnode.componentOptions.Ctor.cid\r\n        page._init_ = true\r\n      }\r\n    },\r\n    /**\r\n     * 加载缓存的 tabs\r\n     */\r\n    loadCachedTabs() {\r\n      const cachedTabsStr = sessionStorage.getItem(process.env.VUE_APP_TBAS_KEY)\r\n      if (cachedTabsStr) {\r\n        try {\r\n          const cachedTabs = JSON.parse(cachedTabsStr)\r\n          if (cachedTabs.length > 0) {\r\n            this.pageList = cachedTabs\r\n          }\r\n        } catch (e) {\r\n          console.warn('failed to load cached tabs, got exception:', e)\r\n        } finally {\r\n          sessionStorage.removeItem(process.env.VUE_APP_TBAS_KEY)\r\n        }\r\n      }\r\n    },\r\n    loadCacheConfig(routes, pCache = true) {\r\n      routes.forEach(item => {\r\n        const cacheAble = item.meta?.page?.cacheAble ?? pCache ?? true\r\n        if (!cacheAble) {\r\n          this.excludeKeys.push(new RegExp(`${item.path}\\\\d+$`))\r\n        }\r\n        if (item.children) {\r\n          this.loadCacheConfig(item.children, cacheAble)\r\n        }\r\n      })\r\n    },\r\n    ...mapMutations('setting', ['correctPageMinHeight'])\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .tabs-view{\r\n    margin: -16px auto 8px;\r\n    &.head.fixed{\r\n      max-width: 1400px;\r\n    }\r\n  }\r\n  .tabs-view-content{\r\n    position: relative;\r\n    &.head.fixed{\r\n      width: 1400px;\r\n      margin: 0 auto;\r\n    }\r\n  }\r\n</style>\r\n"]}]}