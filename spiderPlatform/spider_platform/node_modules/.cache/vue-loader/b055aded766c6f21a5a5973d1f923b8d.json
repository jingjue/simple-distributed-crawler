{"remainingRequest":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Project\\spiderPlatform\\spider_platform\\src\\layouts\\tabs\\TabsHead.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Project\\spiderPlatform\\spider_platform\\src\\layouts\\tabs\\TabsHead.vue","mtime":1646988546854},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646988157970},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\babel-loader\\lib\\index.js","mtime":1646988157969},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1646988157970},{"path":"D:\\Project\\spiderPlatform\\spider_platform\\node_modules\\vue-loader\\lib\\index.js","mtime":1646988174758}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7bWFwU3RhdGUsIG1hcE11dGF0aW9uc30gZnJvbSAndnVleCcKaW1wb3J0IHtnZXRJMThuS2V5fSBmcm9tICdAL3V0aWxzL3JvdXRlclV0aWwnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1RhYnNIZWFkJywKICBpMThuOiB7CiAgICBtZXNzYWdlczogewogICAgICBDTjogewogICAgICAgIGxvY2s6ICfngrnlh7vplIHlrprpobXnrb7lpLQnLAogICAgICAgIHVubG9jazogJ+eCueWHu+ino+mZpOmUgeWumicsCiAgICAgIH0sCiAgICAgIEhLOiB7CiAgICAgICAgbG9jazogJ+m7nuaTiumOluWumumggeewvemgrScsCiAgICAgICAgdW5sb2NrOiAn6bue5pOK6Kej6Zmk6Y6W5a6aJywKICAgICAgfSwKICAgICAgVVM6IHsKICAgICAgICBsb2NrOiAnY2xpY2sgdG8gbG9jayB0aGUgdGFicyBoZWFkJywKICAgICAgICB1bmxvY2s6ICdjbGljayB0byB1bmxvY2snLAogICAgICB9CiAgICB9CiAgfSwKICBwcm9wczogewogICAgcGFnZUxpc3Q6IEFycmF5LAogICAgYWN0aXZlOiBTdHJpbmcsCiAgICBmaXhlZDogQm9vbGVhbgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFmZml4ZWQ6IGZhbHNlLAogICAgfQogIH0sCiAgaW5qZWN0OlsnYWRtaW5MYXlvdXQnXSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5hZmZpeGVkID0gdGhpcy5maXhlZFRhYnMKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZSgnc2V0dGluZycsIFsnbGF5b3V0JywgJ3BhZ2VXaWR0aCcsICdmaXhlZEhlYWRlcicsICdmaXhlZFRhYnMnLCAnY3VzdG9tVGl0bGVzJ10pLAogICAgbG9ja1RpdGxlKCkgewogICAgICByZXR1cm4gdGhpcy4kdCh0aGlzLmZpeGVkVGFicyA/ICd1bmxvY2snIDogJ2xvY2snKQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLi4ubWFwTXV0YXRpb25zKCdzZXR0aW5nJywgWydzZXRGaXhlZFRhYnMnXSksCiAgICBvbkxvY2tDbGljaygpIHsKICAgICAgdGhpcy5zZXRGaXhlZFRhYnMoIXRoaXMuZml4ZWRUYWJzKQogICAgICBpZiAodGhpcy5maXhlZFRhYnMpIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuYWZmaXhlZCA9IHRydWUKICAgICAgICB9LCAyMDApCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hZmZpeGVkID0gZmFsc2UKICAgICAgfQogICAgfSwKICAgIG9uVGFiQ2xpY2soa2V5KSB7CiAgICAgIGlmICh0aGlzLmFjdGl2ZSAhPT0ga2V5KSB7CiAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywga2V5KQogICAgICB9CiAgICB9LAogICAgb25DbG9zZShrZXkpIHsKICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnLCBrZXkpCiAgICB9LAogICAgb25SZWZyZXNoKHBhZ2UpIHsKICAgICAgdGhpcy4kZW1pdCgncmVmcmVzaCcsIHBhZ2UucGF0aCwgcGFnZSkKICAgIH0sCiAgICBvbkNvbnRleHRtZW51KHBhZ2VLZXksIGUpIHsKICAgICAgdGhpcy4kZW1pdCgnY29udGV4dG1lbnUnLCBwYWdlS2V5LCBlKQogICAgfSwKICAgIHBhZ2VOYW1lKHBhZ2UpIHsKICAgICAgY29uc3QgcGFnZVBhdGggPSBwYWdlLmZ1bGxQYXRoLnNwbGl0KCc/JylbMF0KICAgICAgY29uc3QgY3VzdG9tID0gdGhpcy5jdXN0b21UaXRsZXMuZmluZChpdGVtID0+IGl0ZW0ucGF0aCA9PT0gcGFnZVBhdGgpCiAgICAgIHJldHVybiAoY3VzdG9tICYmIGN1c3RvbS50aXRsZSkgfHwgcGFnZS50aXRsZSB8fCB0aGlzLiR0KGdldEkxOG5LZXkocGFnZS5rZXlQYXRoKSkKICAgIH0KICB9Cn0K"},{"version":3,"sources":["TabsHead.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TabsHead.vue","sourceRoot":"src/layouts/tabs","sourcesContent":["<template>\r\n  <div :class=\"['tabs-head', layout, pageWidth]\">\r\n    <a-tabs\r\n        type=\"editable-card\"\r\n        :class=\"['tabs-container', layout, pageWidth, {'affixed' : affixed, 'fixed-header' : fixedHeader, 'collapsed' : adminLayout.collapsed}]\"\r\n        :active-key=\"active\"\r\n        :hide-add=\"true\"\r\n    >\r\n      <a-tooltip placement=\"left\" :title=\"lockTitle\" slot=\"tabBarExtraContent\">\r\n        <a-icon\r\n            theme=\"filled\"\r\n            @click=\"onLockClick\"\r\n            class=\"header-lock\"\r\n            :type=\"fixedTabs ? 'lock' : 'unlock'\"\r\n        />\r\n      </a-tooltip>\r\n      <a-tab-pane v-for=\"page in pageList\" :key=\"page.path\">\r\n        <div slot=\"tab\" class=\"tab\" @contextmenu=\"e => onContextmenu(page.path, e)\">\r\n          <a-icon @click=\"onRefresh(page)\" :class=\"['icon-sync', {'hide': page.path !== active && !page.loading}]\" :type=\"page.loading ? 'loading' : 'sync'\" />\r\n          <div class=\"title\" @click=\"onTabClick(page.path)\" >{{pageName(page)}}</div>\r\n          <a-icon v-if=\"!page.unclose\" @click=\"onClose(page.path)\" class=\"icon-close\" type=\"close\"/>\r\n        </div>\r\n      </a-tab-pane>\r\n    </a-tabs>\r\n    <div v-if=\"affixed\" class=\"virtual-tabs\"></div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {mapState, mapMutations} from 'vuex'\r\n  import {getI18nKey} from '@/utils/routerUtil'\r\n\r\n  export default {\r\n    name: 'TabsHead',\r\n    i18n: {\r\n      messages: {\r\n        CN: {\r\n          lock: '点击锁定页签头',\r\n          unlock: '点击解除锁定',\r\n        },\r\n        HK: {\r\n          lock: '點擊鎖定頁簽頭',\r\n          unlock: '點擊解除鎖定',\r\n        },\r\n        US: {\r\n          lock: 'click to lock the tabs head',\r\n          unlock: 'click to unlock',\r\n        }\r\n      }\r\n    },\r\n    props: {\r\n      pageList: Array,\r\n      active: String,\r\n      fixed: Boolean\r\n    },\r\n    data() {\r\n      return {\r\n        affixed: false,\r\n      }\r\n    },\r\n    inject:['adminLayout'],\r\n    created() {\r\n      this.affixed = this.fixedTabs\r\n    },\r\n    computed: {\r\n      ...mapState('setting', ['layout', 'pageWidth', 'fixedHeader', 'fixedTabs', 'customTitles']),\r\n      lockTitle() {\r\n        return this.$t(this.fixedTabs ? 'unlock' : 'lock')\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapMutations('setting', ['setFixedTabs']),\r\n      onLockClick() {\r\n        this.setFixedTabs(!this.fixedTabs)\r\n        if (this.fixedTabs) {\r\n          setTimeout(() => {\r\n            this.affixed = true\r\n          }, 200)\r\n        } else {\r\n          this.affixed = false\r\n        }\r\n      },\r\n      onTabClick(key) {\r\n        if (this.active !== key) {\r\n          this.$emit('change', key)\r\n        }\r\n      },\r\n      onClose(key) {\r\n        this.$emit('close', key)\r\n      },\r\n      onRefresh(page) {\r\n        this.$emit('refresh', page.path, page)\r\n      },\r\n      onContextmenu(pageKey, e) {\r\n        this.$emit('contextmenu', pageKey, e)\r\n      },\r\n      pageName(page) {\r\n        const pagePath = page.fullPath.split('?')[0]\r\n        const custom = this.customTitles.find(item => item.path === pagePath)\r\n        return (custom && custom.title) || page.title || this.$t(getI18nKey(page.keyPath))\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .tab{\r\n    margin: 0 -16px;\r\n    padding: 0 16px;\r\n    font-size: 14px;\r\n    user-select: none;\r\n    transition: all 0.2s;\r\n    .title{\r\n      display: inline-block;\r\n      height: 100%;\r\n    }\r\n    .icon-close{\r\n      font-size: 12px;\r\n      margin-left: 6px;\r\n      margin-right: -4px !important;\r\n      color: @text-color-second;\r\n      &:hover{\r\n        color: @text-color;\r\n      }\r\n    }\r\n    .icon-sync{\r\n      margin-left: -4px;\r\n      color: @primary-4;\r\n      transition: all 0.3s ease-in-out;\r\n      &:hover{\r\n        color: @primary-color;\r\n      }\r\n      font-size: 14px;\r\n      &.hide{\r\n        font-size: 0;\r\n      }\r\n    }\r\n  }\r\n  .tabs-head{\r\n    margin: 0 auto;\r\n    &.head.fixed{\r\n      width: 1400px;\r\n    }\r\n  }\r\n  .tabs-container{\r\n    margin: -16px auto 8px;\r\n    transition: top,left 0.2s;\r\n    .header-lock{\r\n      font-size: 18px;\r\n      cursor: pointer;\r\n      color: @primary-3;\r\n      &:hover{\r\n        color: @primary-color;\r\n      }\r\n    }\r\n    &.affixed{\r\n      margin: 0 auto;\r\n      top: 0px;\r\n      padding: 8px 24px 0;\r\n      position: fixed;\r\n      height: 48px;\r\n      z-index: 1;\r\n      background-color: @layout-body-background;\r\n      &.side,&.mix{\r\n        right: 0;\r\n        left: 256px;\r\n        &.collapsed{\r\n          left: 80px;\r\n        }\r\n      }\r\n      &.head{\r\n        width: inherit;\r\n        padding: 8px 0 0;\r\n        &.fluid{\r\n          left: 0;\r\n          right: 0;\r\n          padding: 8px 24px 0;\r\n        }\r\n      }\r\n      &.fixed-header{\r\n        top: 64px;\r\n      }\r\n    }\r\n  }\r\n  .virtual-tabs{\r\n    height: 48px;\r\n  }\r\n</style>\r\n"]}]}